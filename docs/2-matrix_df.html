<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./2-shallow.html" rel="next">
<link href="./2-intro_ml.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-8da5b4427184b79ecddefad3d342027e.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light"><meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Ricardo Semião e Castro" name="Author">
    <link href="/site_assets/img/icon.png" rel="icon" type="image/png">
    <link href="/site_assets/img/icon.png" rel="shortcut icon" type="image/png">

    <title>Python: Automação, Apps, e Machine Learning – Visualização de Dados</title>
    <style>
        code{white-space: pre-wrap;}
        span.smallcaps{font-variant: small-caps;}
        div.columns{display: flex; gap: min(4vw, 1.5em);}
        div.column{flex: auto; overflow-x: auto;}
        div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
        ul.task-list{list-style: none;}
        ul.task-list li input[type="checkbox"] {
          width: 0.8em;
          margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
          vertical-align: middle;
        }
        /* CSS for syntax highlighting */
        pre > code.sourceCode { white-space: pre; position: relative; }
        pre > code.sourceCode > span { line-height: 1.25; }
        pre > code.sourceCode > span:empty { height: 1.2em; }
        .sourceCode { overflow: visible; }
        code.sourceCode > span { color: inherit; text-decoration: inherit; }
        div.sourceCode { margin: 1em 0; }
        pre.sourceCode { margin: 0; }
        @media screen {
        div.sourceCode { overflow: auto; }
        }
        @media print {
        pre > code.sourceCode { white-space: pre-wrap; }
        pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
        }
        pre.numberSource code
          { counter-reset: source-line 0; }
        pre.numberSource code > span
          { position: relative; left: -4em; counter-increment: source-line; }
        pre.numberSource code > span > a:first-child::before
          { content: counter(source-line);
            position: relative; left: -1em; text-align: right; vertical-align: baseline;
            border: none; display: inline-block;
            -webkit-touch-callout: none; -webkit-user-select: none;
            -khtml-user-select: none; -moz-user-select: none;
            -ms-user-select: none; user-select: none;
            padding: 0 4px; width: 4em;
          }
        pre.numberSource { margin-left: 3em;  padding-left: 4px; }
        div.sourceCode
          {   }
        @media screen {
        pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
        }
    </style>
    <script id="quarto-search-options" type="application/json">{
      "location": "sidebar",
      "copy-button": false,
      "collapse-after": 3,
      "panel-placement": "start",
      "type": "textbox",
      "limit": 50,
      "keyboard-shortcut": [
        "f",
        "/",
        "s"
      ],
      "show-item-context": false,
      "language": {
        "search-no-results-text": "No results",
        "search-matching-documents-text": "matching documents",
        "search-copy-link-title": "Copy link to search",
        "search-hide-matches-text": "Hide additional matches",
        "search-more-match-text": "more match in this document",
        "search-more-matches-text": "more matches in this document",
        "search-clear-button-title": "Clear",
        "search-text-placeholder": "",
        "search-detached-cancel-button-title": "Cancel",
        "search-submit-button-title": "Submit",
        "search-label": "Search"
      }
    }</script>

    <link href="/site_assets/site_structure.css" rel="stylesheet">
    <link href="/site_assets/site_style.css" rel="stylesheet">
</head>

<body class="nav-sidebar floating">

    <header id="site-header">
        <div class="header-block"></div>
        <nav>
            <ul>
                <li class="nav-li">
                    <a href="./">Home</a>
                </li>
                <li class="nav-li">
                    <a href="/cv.html">CV</a>
                </li>
                <li class="nav-drop">
                    <p>Courses</p>
                    <button></button>
                    <ul>
                        <li class="nav-li">
                            <a href="/course-rfcd/">R (RFCD)</a>
                        </li>
                        <li class="nav-li">
                            <a href="/course-ccia/">CS (CCIA)</a>
                        </li>
                        <li class="nav-li">
                            <a href="/course-paaml/">Python (PAAML)</a>
                        </li>
                    </ul>
                </li>
                <li class="nav-drop">
                    <p>Packages</p>
                    <button></button>
                    <ul>
                        <li class="nav-li">
                            <a href="/mtsdesc/">mtsdesc</a>
                        </li>
                        <li class="nav-li">
                            <a href="/phyopt/">phyopt</a>
                        </li>
                        <li class="nav-li">
                            <a href="/morphdown/">morphdown</a>
                        </li>
                    </ul>
                </li>
            </ul>
        </nav>
        <div class="header-block"></div>
    </header>
    <div class="container-fluid">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./2-intro_ml.html">Machine Learning</a></li><li class="breadcrumb-item"><a href="./2-matrix_df.html"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Visualização de Dados</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Python: Automação, Apps, e Machine Learning</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bem Vindo(a)!</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introdução</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">A Linguagem</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1-intro_python.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introdução ao Python</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1-oop.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Programação Orientada a Objeto</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1-sintax_variables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Sintaxe e Variáveis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1-data_collections.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Tipos de Valores e Coleções</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1-control_conds.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Control Flow e Condições</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1-subset.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Subsetting</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1-funs_envs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Funções e Ambientes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1-others.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Outros Tópicos</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Machine Learning</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2-intro_ml.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Machine Learning Teórica</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2-matrix_df.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Visualização de Dados</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2-shallow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Shallow Learning</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2-deep.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Deep Learning</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Automação</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3-intro_automation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Overview</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3-webscrap.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Web Scrapping</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3-others.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Outros Tópicos</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Aplicações</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4-intro_app.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Overview</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4-jango_jinja.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Jango</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4-shiny.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Shiny</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4-others.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Outros</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
            <h2 id="toc-title">Table of contents</h2>
<ul>
<li><a href="#numpy" id="toc-numpy" class="nav-link active" data-scroll-target="#numpy"><span class="header-section-number">12</span> 1. Numpy</a>
<ul class="collapse">
<li><a href="#introdução" id="toc-introdução" class="nav-link" data-scroll-target="#introdução"><span class="header-section-number">12.1</span> 1.1 Introdução</a>
<ul class="collapse">
<li><a href="#o-conceito-de-arrays" id="toc-o-conceito-de-arrays" class="nav-link" data-scroll-target="#o-conceito-de-arrays"><span class="header-section-number">12.1.1</span> O conceito de arrays</a></li>
<li><a href="#benefícios-do-numpy" id="toc-benefícios-do-numpy" class="nav-link" data-scroll-target="#benefícios-do-numpy"><span class="header-section-number">12.1.2</span> Benefícios do numpy</a></li>
<li><a href="#vetorização" id="toc-vetorização" class="nav-link" data-scroll-target="#vetorização"><span class="header-section-number">12.1.3</span> Vetorização</a></li>
</ul></li>
<li><a href="#básico-sobre-arrays" id="toc-básico-sobre-arrays" class="nav-link" data-scroll-target="#básico-sobre-arrays"><span class="header-section-number">12.2</span> 1.2 Básico sobre arrays</a>
<ul class="collapse">
<li><a href="#criação-e-forma" id="toc-criação-e-forma" class="nav-link" data-scroll-target="#criação-e-forma"><span class="header-section-number">12.2.1</span> Criação e forma</a></li>
<li><a href="#random" id="toc-random" class="nav-link" data-scroll-target="#random"><span class="header-section-number">12.2.2</span> Random</a></li>
<li><a href="#tipos-de-arrays" id="toc-tipos-de-arrays" class="nav-link" data-scroll-target="#tipos-de-arrays"><span class="header-section-number">12.2.3</span> Tipos de arrays</a></li>
<li><a href="#métodos" id="toc-métodos" class="nav-link" data-scroll-target="#métodos"><span class="header-section-number">12.2.4</span> Métodos</a></li>
</ul></li>
<li><a href="#operações-com-arrays" id="toc-operações-com-arrays" class="nav-link" data-scroll-target="#operações-com-arrays"><span class="header-section-number">12.3</span> 1.3 Operações com Arrays</a></li>
<li><a href="#subsetting-e-copying" id="toc-subsetting-e-copying" class="nav-link" data-scroll-target="#subsetting-e-copying"><span class="header-section-number">12.4</span> 1.4 Subsetting e Copying</a>
<ul class="collapse">
<li><a href="#subseting-básico" id="toc-subseting-básico" class="nav-link" data-scroll-target="#subseting-básico"><span class="header-section-number">12.4.1</span> Subseting básico</a></li>
<li><a href="#subseting-avançado" id="toc-subseting-avançado" class="nav-link" data-scroll-target="#subseting-avançado"><span class="header-section-number">12.4.2</span> Subseting avançado</a></li>
<li><a href="#copy-versus-view" id="toc-copy-versus-view" class="nav-link" data-scroll-target="#copy-versus-view"><span class="header-section-number">12.4.3</span> Copy versus view</a></li>
</ul></li>
</ul></li>
<li><a href="#pandas" id="toc-pandas" class="nav-link" data-scroll-target="#pandas"><span class="header-section-number">13</span> 2. Pandas</a>
<ul class="collapse">
<li><a href="#introdução-1" id="toc-introdução-1" class="nav-link" data-scroll-target="#introdução-1"><span class="header-section-number">13.1</span> 2.1 Introdução</a>
<ul class="collapse">
<li><a href="#benefícios-do-pandas" id="toc-benefícios-do-pandas" class="nav-link" data-scroll-target="#benefícios-do-pandas"><span class="header-section-number">13.1.1</span> <strong>Benefícios do Pandas:</strong></a></li>
</ul></li>
<li><a href="#básico-sobre-series-e-dataframes" id="toc-básico-sobre-series-e-dataframes" class="nav-link" data-scroll-target="#básico-sobre-series-e-dataframes"><span class="header-section-number">13.2</span> 2.2 Básico Sobre Series e Dataframes</a>
<ul class="collapse">
<li><a href="#como-podemos-criar-essas-estruturas-de-dados" id="toc-como-podemos-criar-essas-estruturas-de-dados" class="nav-link" data-scroll-target="#como-podemos-criar-essas-estruturas-de-dados"><span class="header-section-number">13.2.1</span> <strong>Como podemos criar essas estruturas de dados?</strong></a></li>
<li><a href="#outras-fontes" id="toc-outras-fontes" class="nav-link" data-scroll-target="#outras-fontes"><span class="header-section-number">13.2.2</span> <strong>Outras Fontes:</strong></a></li>
<li><a href="#summarise" id="toc-summarise" class="nav-link" data-scroll-target="#summarise"><span class="header-section-number">13.2.3</span> Summarise:</a></li>
</ul></li>
<li><a href="#subset" id="toc-subset" class="nav-link" data-scroll-target="#subset"><span class="header-section-number">13.3</span> 2.3 Subset</a>
<ul class="collapse">
<li><a href="#subset-linhas" id="toc-subset-linhas" class="nav-link" data-scroll-target="#subset-linhas"><span class="header-section-number">13.3.1</span> Subset linhas</a></li>
<li><a href="#subset-colunas" id="toc-subset-colunas" class="nav-link" data-scroll-target="#subset-colunas"><span class="header-section-number">13.3.2</span> Subset colunas</a></li>
<li><a href="#subset-os-dois-juntos" id="toc-subset-os-dois-juntos" class="nav-link" data-scroll-target="#subset-os-dois-juntos"><span class="header-section-number">13.3.3</span> Subset os dois juntos</a></li>
</ul></li>
<li><a href="#operarcriar" id="toc-operarcriar" class="nav-link" data-scroll-target="#operarcriar"><span class="header-section-number">13.4</span> 2.4 Operar/Criar</a>
<ul class="collapse">
<li><a href="#lidar-com-dados-na" id="toc-lidar-com-dados-na" class="nav-link" data-scroll-target="#lidar-com-dados-na"><span class="header-section-number">13.4.1</span> Lidar com dados NA</a></li>
</ul></li>
</ul></li>
<li><a href="#temas-adicionais" id="toc-temas-adicionais" class="nav-link" data-scroll-target="#temas-adicionais"><span class="header-section-number">14</span> Temas Adicionais</a>
<ul class="collapse">
<li><a href="#numpy---manipulating-arrays" id="toc-numpy---manipulating-arrays" class="nav-link" data-scroll-target="#numpy---manipulating-arrays"><span class="header-section-number">14.1</span> 1.5 Numpy - Manipulating Arrays</a>
<ul class="collapse">
<li><a href="#alterar-a-forma" id="toc-alterar-a-forma" class="nav-link" data-scroll-target="#alterar-a-forma"><span class="header-section-number">14.1.1</span> Alterar a forma</a></li>
<li><a href="#adicionar-e-remover-elementos" id="toc-adicionar-e-remover-elementos" class="nav-link" data-scroll-target="#adicionar-e-remover-elementos"><span class="header-section-number">14.1.2</span> Adicionar e remover elementos</a></li>
<li><a href="#combinar" id="toc-combinar" class="nav-link" data-scroll-target="#combinar"><span class="header-section-number">14.1.3</span> Combinar</a></li>
<li><a href="#dividir" id="toc-dividir" class="nav-link" data-scroll-target="#dividir"><span class="header-section-number">14.1.4</span> Dividir</a></li>
</ul></li>
<li><a href="#numpy---funções-universais" id="toc-numpy---funções-universais" class="nav-link" data-scroll-target="#numpy---funções-universais"><span class="header-section-number">14.2</span> 1.6 Numpy - Funções Universais</a></li>
<li><a href="#pandas---reshape" id="toc-pandas---reshape" class="nav-link" data-scroll-target="#pandas---reshape"><span class="header-section-number">14.3</span> 2.5 Pandas - Reshape</a>
<ul class="collapse">
<li><a href="#reordenar" id="toc-reordenar" class="nav-link" data-scroll-target="#reordenar"><span class="header-section-number">14.3.1</span> Reordenar</a></li>
<li><a href="#renomear" id="toc-renomear" class="nav-link" data-scroll-target="#renomear"><span class="header-section-number">14.3.2</span> Renomear</a></li>
<li><a href="#remodelar" id="toc-remodelar" class="nav-link" data-scroll-target="#remodelar"><span class="header-section-number">14.3.3</span> Remodelar</a></li>
<li><a href="#separar-e-unir-colunas" id="toc-separar-e-unir-colunas" class="nav-link" data-scroll-target="#separar-e-unir-colunas"><span class="header-section-number">14.3.4</span> Separar e unir colunas</a></li>
</ul></li>
<li><a href="#pandas---combinar" id="toc-pandas---combinar" class="nav-link" data-scroll-target="#pandas---combinar"><span class="header-section-number">14.4</span> 2.6 Pandas - Combinar</a>
<ul class="collapse">
<li><a href="#concatenar" id="toc-concatenar" class="nav-link" data-scroll-target="#concatenar"><span class="header-section-number">14.4.1</span> Concatenar</a></li>
<li><a href="#merge" id="toc-merge" class="nav-link" data-scroll-target="#merge"><span class="header-section-number">14.4.2</span> Merge</a></li>
</ul></li>
</ul></li>
<li><a href="#introdução-2" id="toc-introdução-2" class="nav-link" data-scroll-target="#introdução-2"><span class="header-section-number">15</span> 1. Introdução</a>
<ul class="collapse">
<li><a href="#recapitulando" id="toc-recapitulando" class="nav-link" data-scroll-target="#recapitulando"><span class="header-section-number">15.1</span> 1.1 Recapitulando</a></li>
<li><a href="#projetos-de-ciência-de-dados" id="toc-projetos-de-ciência-de-dados" class="nav-link" data-scroll-target="#projetos-de-ciência-de-dados"><span class="header-section-number">15.2</span> 1.2 Projetos de Ciência de Dados</a>
<ul class="collapse">
<li><a href="#a-ciência-de-dados" id="toc-a-ciência-de-dados" class="nav-link" data-scroll-target="#a-ciência-de-dados"><span class="header-section-number">15.2.1</span> A Ciência de Dados</a></li>
<li><a href="#as-etapas-de-um-projeto" id="toc-as-etapas-de-um-projeto" class="nav-link" data-scroll-target="#as-etapas-de-um-projeto"><span class="header-section-number">15.2.2</span> As etapas de um projeto</a></li>
<li><a href="#a-organização-de-um-script" id="toc-a-organização-de-um-script" class="nav-link" data-scroll-target="#a-organização-de-um-script"><span class="header-section-number">15.2.3</span> A Organização de um script</a></li>
</ul></li>
</ul></li>
<li><a href="#data-wrangle" id="toc-data-wrangle" class="nav-link" data-scroll-target="#data-wrangle"><span class="header-section-number">16</span> 2. Data Wrangle</a>
<ul class="collapse">
<li><a href="#tidy-1" id="toc-tidy-1" class="nav-link" data-scroll-target="#tidy-1"><span class="header-section-number">16.0.1</span> Tidy</a></li>
<li><a href="#transform-1" id="toc-transform-1" class="nav-link" data-scroll-target="#transform-1"><span class="header-section-number">16.0.2</span> Transform</a></li>
</ul></li>
<li><a href="#visualização" id="toc-visualização" class="nav-link" data-scroll-target="#visualização"><span class="header-section-number">17</span> 3. Visualização</a>
<ul class="collapse">
<li><a href="#sumarisação-dos-dados" id="toc-sumarisação-dos-dados" class="nav-link" data-scroll-target="#sumarisação-dos-dados"><span class="header-section-number">17.1</span> 3.1 Sumarisação dos Dados</a>
<ul class="collapse">
<li><a href="#sumarisando-o-dataframe-como-um-todo" id="toc-sumarisando-o-dataframe-como-um-todo" class="nav-link" data-scroll-target="#sumarisando-o-dataframe-como-um-todo"><span class="header-section-number">17.1.1</span> Sumarisando o dataframe como um todo</a></li>
<li><a href="#sumarisando-variáveis-categóricas" id="toc-sumarisando-variáveis-categóricas" class="nav-link" data-scroll-target="#sumarisando-variáveis-categóricas"><span class="header-section-number">17.1.2</span> Sumarisando variáveis categóricas</a></li>
<li><a href="#sumarisando-variáveis-contínuas" id="toc-sumarisando-variáveis-contínuas" class="nav-link" data-scroll-target="#sumarisando-variáveis-contínuas"><span class="header-section-number">17.1.3</span> Sumarisando variáveis contínuas</a></li>
<li><a href="#analisando-grupos-nos-dados" id="toc-analisando-grupos-nos-dados" class="nav-link" data-scroll-target="#analisando-grupos-nos-dados"><span class="header-section-number">17.1.4</span> Analisando grupos nos dados</a></li>
</ul></li>
<li><a href="#ggplot" id="toc-ggplot" class="nav-link" data-scroll-target="#ggplot"><span class="header-section-number">17.2</span> GGPlot</a></li>
<li><a href="#matplotlib" id="toc-matplotlib" class="nav-link" data-scroll-target="#matplotlib"><span class="header-section-number">17.3</span> Matplotlib</a></li>
</ul></li>
</ul>
        </nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./2-intro_ml.html">Machine Learning</a></li><li class="breadcrumb-item"><a href="./2-matrix_df.html"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Visualização de Dados</span></a></li></ol></nav><h1 class="title display-7">Visualização de Dados</h1></header>
        <header id="title-block-header">
            
        </header>
        
<p>Aqui falarei sobre a manipulação e visualização que a modelagem demanda. Porém, o material melhor estará no livro de R, RFCD, dado a disponibilidade do tidyverse. Aqui, comentarei muito mais rapidamente sobre as contrapartes no Python.</p>
<hr>
<section id="numpy" class="level1" data-number="12">
<h1 data-number="12"><span class="header-section-number">12</span> 1. Numpy</h1>
<section id="introdução" class="level2" data-number="12.1">
<h2 data-number="12.1" class="anchored" data-anchor-id="introdução"><span class="header-section-number">12.1</span> 1.1 Introdução</h2>
<p>O que é Numpy? De acordo com o <a href="https://numpy.org/doc/stable/index.html">site oficial</a>:</p>
<blockquote class="blockquote">
<p>NumPy is the fundamental package for scientific computing in Python. It is a Python library that provides a multidimensional array object, various derived objects (such as masked arrays and matrices), and an assortment of routines for fast operations on arrays, including mathematical, logical, shape manipulation, sorting, selecting, I/O, discrete Fourier transforms, basic linear algebra, basic statistical operations, random simulation and much more.</p>
</blockquote>
<p>Antes de tudo, vamos <a href="https://numpy.org/install/">instalar</a> e carregar a biblioteca:</p>
<div id="7b0d4951" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="o-conceito-de-arrays" class="level3" data-number="12.1.1">
<h3 data-number="12.1.1" class="anchored" data-anchor-id="o-conceito-de-arrays"><span class="header-section-number">12.1.1</span> O conceito de arrays</h3>
<p>O conceito que encapsula as principais novidades que a biblioteca traz é o de <em>array</em>, e sua diferença com listas.</p>
<p>Em termos simplificados, podemos entender os arrays como um novo tipo de coleção, uma coleção homogênea/atômica, em oposição à listas, heterogêneas/genéricas. Isto é: todos os elementos de um array são do mesmo “tipo”, o que não é uma necessidade em listas.</p>
<p>Veja exemplos abaixo, e se poderão ou não ser entendidos como arrays:</p>
<ul>
<li><code>[1]</code> poderá.</li>
<li><code>[1, 2]</code> poderá.</li>
<li><code>[1, "a"]</code> não poderá, tem elementos de tipos diferentes.</li>
<li><code>[1, [1, 2]]</code> não poderá, tem elementos de tipos diferentes (inteiro e uma coleção).</li>
</ul>
<p>Alguns exemplos mais complexos:</p>
<ul>
<li><code>[[1, 2], [3, 4]]</code> poderá! Arrays podem “conter si mesmos”, mas, especialmente, entenda isso como arrays podem ser “organizados em múltiplas dimensões”. No caso, seria um array bidimensional, uma matriz com linhas e colunas.</li>
<li><code>[[1, 2], [3, 4, 5]]</code> não poderá! Essa é outra novidade, os arrays devem ser “retangulares”, dentro de cada dimensão, todos os elementos devem ter o memso tamanho. Isso ficará mais claro a diante.</li>
<li>E <code>[[1, 2], [3, "a"]]</code>? Não poderá. Tudo dentro de um array tem que ter o mesmo tipo. Também podemos pensar que, dentro de uma dimensão, tudo deve poder ser entendida como um array.</li>
</ul>
<p>Ok, então, um array é um caso específico de uma lista, é uma lista com duas restrições:</p>
<ul>
<li>Todos os elementos devem ter o mesmo “tipo”.</li>
<li>Deve ser retangulares.</li>
</ul>
</section>
<section id="benefícios-do-numpy" class="level3" data-number="12.1.2">
<h3 data-number="12.1.2" class="anchored" data-anchor-id="benefícios-do-numpy"><span class="header-section-number">12.1.2</span> Benefícios do numpy</h3>
<p>Porque isso é útil? O que ganhamos com essa perda de generalização?</p>
<p>Na vida real, muitas vezes nos deparamos com esse tipo de dado. Em bases de dado, normalmente cada coluna é uma variável, uma coleção de valores de um mesmo tipo. Além disso, são incontáveis os lugares onde matrizes aparecem, e não apenas as bidimensionais.</p>
<p>Criar um framework que seja especializado nesses casos gera três benefícios principais:</p>
<ul>
<li>O clássico trade-off especialização-qualificação, o numpy é <strong>muito</strong> eficiente em realizar operações com esse tipo de dado. E o essa é uma das maiores propagandas que o numpy faz.
<ul>
<li>Inclusive, por trás dos panos, a nível técnico, arrays são objetos bem diferentes de listas.</li>
</ul></li>
<li>A criação de ferramentas especialmente intuitivas e úteis para o contexto.</li>
<li>Facilitação do escopo, fica muito mais simples e intuitivo elencar as ferramentas que queremos ter para trabalhar.
<ul>
<li>Pense em como buscar as ferramentas relevantes para limpar uma base de dados, na documentação dos métodos de listas e bibliotecas math, stat, etc. Versus buscar as ferramentas na documentação do numpy.</li>
</ul></li>
</ul>
</section>
<section id="vetorização" class="level3" data-number="12.1.3">
<h3 data-number="12.1.3" class="anchored" data-anchor-id="vetorização"><span class="header-section-number">12.1.3</span> Vetorização</h3>
<p>A principal ferramenta/conceito criada para o contexto, para o “modo de pensar com arrays” é a vetorização.</p>
<p>Eu tenho certeza que vocês já tentaram fazer algo como <code>[1, 2, 3] * 2</code>, e tiveram vontade de desistir da programação ao ver que o resultado foi <code>[1, 2, 3, 1, 2, 3]</code> e não <code>[2, 4, 6]</code>.</p>
<p>Porque isso acontece? Lembre que listas são genéricas: é óbvio o que <code>[1, "a", [3, 4]] * 2</code> deveria retornar? Não! Para cada elemento, o símbolo <code>*</code> é o mesmo, mas as operações são completamente diferentes. Não é tão natural aplicar transformações elemento-a-elemento em coleções genéricas.</p>
<p>Agora, arrays, são homogêneos, é muito mais natural aplicar uma transformação elemento-a-elemento. Normalmente, quando estamos trabalhando com arrays, é porque é esse o tipo de transformação que queremos fazer. O numpy sabe disso, e as faz de um jeito muito eficiente. Esse é o conceito de transformações vetorizadas.</p>
<p>Vamos deixar isso mais claro com exemplos. Mas antes, veja um exemplo do ganho de eficiência com a vetorização:</p>
<div id="3f2c4aa0" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="dv">10000000</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>a1 <span class="op">=</span> np.arange(n)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>l1 <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(n))</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>timeit a1 <span class="op">*</span> <span class="dv">2</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>timeit [x <span class="op">*</span> <span class="dv">2</span> <span class="cf">for</span> x <span class="kw">in</span> l1]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="básico-sobre-arrays" class="level2" data-number="12.2">
<h2 data-number="12.2" class="anchored" data-anchor-id="básico-sobre-arrays"><span class="header-section-number">12.2</span> 1.2 Básico sobre arrays</h2>
<section id="criação-e-forma" class="level3" data-number="12.2.1">
<h3 data-number="12.2.1" class="anchored" data-anchor-id="criação-e-forma"><span class="header-section-number">12.2.1</span> Criação e forma</h3>
<p>Para criar arrays, use a função <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html">numpy.array</a>:</p>
<div id="8fb56e2a" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>a1 <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>])</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>a2 <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>], [<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>]])</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>a3 <span class="op">=</span> np.array([[[<span class="dv">1</span>, <span class="dv">7</span>, <span class="dv">9</span>], [<span class="dv">5</span>, <span class="dv">9</span>, <span class="dv">3</span>]], [[<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">1</span>], [<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>]]])</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> a <span class="kw">in</span> [a1, a2, a3]: <span class="bu">print</span>(a, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="https://www.plus2net.com/python/images/np-dimensions.jpg" width="400"></p>
<p>Note que começamos a “contar” pelo vetor, depois pelas linhas, depois pelas matrizes, etc.</p>
<p>Para estudar o formato de um array, usamos <code>.shape</code>. Também podemos usar as funções <code>len()</code>, e <code>.ndim</code>:</p>
<div id="b3121c24" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> a <span class="kw">in</span> [a1, a2, a3]: <span class="bu">print</span>(a.shape, a.ndim, <span class="bu">len</span>(a), sep <span class="op">=</span> <span class="st">" -- "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Arrays são costumeiramente chamados de <em>ndarrays</em>, arrays <em>n</em> dimensionais.</p>
<p><strong>Arrays importados</strong></p>
<p>Podemos salvar arrays em arquivos, usando funções como:</p>
<ul>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.save.html">numpy.save</a>: salva como um “arquivo array” “.npy”.</li>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.savetxt.html">numpy.savetxt</a>: salva como um arquivo CSV, adequado apenas para arrays 1D e 2D.</li>
<li><a href="https://docs.python.org/3/library/pickle.html">A biblioteca pickle</a>: uma bilbioteca que consegue “conservar” qualquer objeto do python, mas pode ser demorado.</li>
</ul>
<p>Similarmente, podemos importar arquivos, com funções <code>numpy.load</code> e <code>numpy.loadtxt</code>.</p>
<p>Por fim, é comum converter outros objetos em arrays. Veja as funções <a href="https://numpy.org/doc/stable/reference/generated/numpy.asarray.html">numpy.asarray</a> e <a href="https://pandas.pydata.org/pandas-docs/version/0.24.0rc1/api/generated/pandas.Series.to_numpy.html">pandas.Series.to_numpy</a>.</p>
<p><strong>Arrays placeholders</strong></p>
<p>Também podemos criar arrays com valores comuns, temos várias funções, como:</p>
<ul>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.empty.html">numpy.empty</a>: cria um array vazio com a forma especificada.</li>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.ones.html">numpy.ones</a>: cria um array preenchido com uns.</li>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.zeros.html">numpy.zeros</a>: cria um array preenchido com zeros.</li>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.full.html">numpy.full</a>: cria um array preenchido com um valor constante.</li>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.eye.html">numpy.eye</a>: cria uma matriz identidade.</li>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.linspace.html">numpy.linspace</a>: cria um array com valores espaçados uniformemente dentro de um intervalo.</li>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.arange.html">numpy.arange</a>: cria um array com valores espaçados uniformemente dentro de um intervalo especificado.</li>
</ul>
<div id="902de97a" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Empty: </span><span class="ch">\n</span><span class="st">"</span>, np.empty((<span class="dv">2</span>, <span class="dv">3</span>)), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Ones: </span><span class="ch">\n</span><span class="st">"</span>, np.ones((<span class="dv">2</span>, <span class="dv">3</span>)), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Zeros: </span><span class="ch">\n</span><span class="st">"</span>, np.zeros((<span class="dv">2</span>, <span class="dv">3</span>)), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Full: </span><span class="ch">\n</span><span class="st">"</span>, np.full((<span class="dv">2</span>, <span class="dv">3</span>), <span class="dv">5</span>), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Eye: </span><span class="ch">\n</span><span class="st">"</span>, np.eye(<span class="dv">3</span>), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Linspace: </span><span class="ch">\n</span><span class="st">"</span>, np.linspace(<span class="dv">0</span>, <span class="dv">10</span>, num<span class="op">=</span><span class="dv">5</span>), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Arange: </span><span class="ch">\n</span><span class="st">"</span>, np.arange(<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">2</span>), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Para mais informação sobre criação de arrays, veja <a href="https://numpy.org/doc/stable/reference/routines.array-creation.html">API Ref. → Routines → Array creation</a>:</p>
<ul>
<li><a href="https://numpy.org/doc/stable/reference/routines.array-creation.html#from-shape-or-value">Criando por forma e valor</a>.</li>
<li><a href="https://numpy.org/doc/stable/reference/routines.array-creation.html#from-existing-data">Criando por dados</a>, e <a href="https://numpy.org/doc/stable/reference/routines.io.html">API Ref. → Routines → I/O</a>.</li>
<li><a href="https://numpy.org/doc/stable/reference/routines.array-creation.html#numerical-ranges">Criando por ranges</a>.</li>
<li><a href="https://numpy.org/doc/stable/reference/routines.array-creation.html#building-matrices">Criando matrizes</a>.</li>
</ul>
</section>
<section id="random" class="level3" data-number="12.2.2">
<h3 data-number="12.2.2" class="anchored" data-anchor-id="random"><span class="header-section-number">12.2.2</span> Random</h3>
<p>O numpy tem uma parte da biblioteca focada na geração de números aleatórios, <a href="https://numpy.org/doc/stable/reference/random/index.html">numpy.random</a>. Se tiver curiosidade, leia mais sobre como computadores geram <a href="https://www.revista-programar.info/artigos/pseudorandom-number-generators-prngs/">números pseudo-aleatórios</a>.</p>
<p>Todas as distribuições que você pensar podem ser geradas pelo numpy:</p>
<ul>
<li>Uniforme: <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.Generator.uniform.html">numpy.random.uniform</a>.
<ul>
<li>Uniforme 0-1: <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.Generator.random.html">numpy.random.random</a>.</li>
<li>Uniforme discreta A-B: <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.Generator.integers.html">numpy.random.integers</a>.</li>
</ul></li>
<li>Binomial: <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.Generator.binomial.html">numpy.random.binomial</a>.</li>
<li>Normal: <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.Generator.normal.html">numpy.random.normal</a>.</li>
<li>Poisson: <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.Generator.poisson.html">numpy.random.poisson</a>.</li>
<li>Samplear um array: <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.Generator.choice.html">numpy.random.choice</a>.</li>
</ul>
<div id="a2474309" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.random.uniform(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">5</span>), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.random.normal(<span class="dv">0</span>, <span class="dv">1</span>, size<span class="op">=</span>(<span class="dv">3</span>, <span class="dv">3</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="tipos-de-arrays" class="level3" data-number="12.2.3">
<h3 data-number="12.2.3" class="anchored" data-anchor-id="tipos-de-arrays"><span class="header-section-number">12.2.3</span> Tipos de arrays</h3>
<p>Mais cedo, falamos que todos os elementos de um arrays tem sempre o mesmo “tipo”. Em termos simplificados, o nome normalmente associado à “tipo” é <em>dtype</em>.</p>
<p>Um elemento (um “escalar”) pode ter vários tipos, mas os mais comuns são:</p>
<ul>
<li><code>int_</code>: números inteiros (<em>integer</em>).</li>
<li><code>float_</code>: números de ponto flutuante (<em>floating-point</em>). O tipo padrão.</li>
<li><code>bool_</code>: valores booleanos (<code>True</code> ou <code>False</code>).</li>
<li><code>str_</code>: <em>strings</em> de texto.</li>
<li>E outros menos utilizados: <code>complex_</code>: números complexos, <code>object_</code>: objetos Python genéricos, <code>datetime64</code>: datas e horários, <code>timedelta64</code>: diferenças entre datas e horários, <code>category</code>: categorias ou rótulos.</li>
</ul>
<p><strong>Alguns comentários mais técnicos:</strong></p>
<p>Na realidade, embora exista o conceito de “número inteiro”, e o Python só defina um tipo de dado <em>integer</em>, existem muitas maneiras de representar um número na memória do computador. O numpy se importa com isso, e existem vários tipos para cada um dos conceitos acima.</p>
<ul>
<li>Por conta disso, o dtype pode aparecer com nomes diferentes como <em>int64</em>.</li>
<li>Se você for muito nerd, talvez isso importe para o seu projeto. Para escolher um tipo específico use a função <code>np.array</code> com o argumento <code>dtype = ...</code>. Leia mais sobre isso <a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#arrays-scalars-built-in">aqui</a>.</li>
<li>O tipo de um array <code>x</code> pode ser descoberto com <code>x.dtype</code> e <code>x.dtype.name</code>.</li>
</ul>
<p>Mas e se eu tentar criar o array <code>[1, "a"]</code>? O numpy usa <em>coerção</em>, ele converte todos os elementos a um mesmo tipo, de acordo com uma lista de prioridade. De maneira simples, <em>int</em> → <em>float</em> → <em>string</em>. Você também pode converter um array para outro tipo usando o método <code>x.astype()</code>. Veja exemplos abaixo.</p>
<div id="1f394bc5" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.array([[<span class="dv">1</span>,<span class="dv">2</span>], [<span class="fl">3.0</span>, <span class="dv">4</span>]]), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.array([[<span class="dv">1</span>,<span class="dv">2</span>], [<span class="fl">3.0</span>, <span class="st">"4.0"</span>]]), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.array([[<span class="dv">1</span>,<span class="dv">2</span>], [<span class="dv">3</span>, <span class="dv">4</span>]], dtype <span class="op">=</span> np.complex_), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.array([[<span class="dv">1</span>,<span class="dv">2</span>], [<span class="dv">3</span>, <span class="dv">4</span>]]).astype(<span class="bu">str</span>), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Para mais informações sobre arrays, como funcionam, como são salvos na memória, veja <a href="https://numpy.org/doc/stable/reference/arrays.html">API Ref. → Array objects</a>. Cuidado, muitos temas técnicos e desnecessários (para o momento).</p>
<p>Especialmente, foram ignorados dois tópicos de arrays:</p>
<ul>
<li>Os <em>masked arrays</em>, arrays com valores faltantes, <a href="https://numpy.org/doc/stable/reference/maskedarray.html">API Ref. → Array objects → Masked arrays</a>.</li>
<li>E os <em>datetime arrays</em>, arrays de datas, <a href="https://numpy.org/doc/stable/reference/arrays.datetime.html">API Ref. → Array objects → Datetimes and Timedeltas</a>.</li>
</ul>
</section>
<section id="métodos" class="level3" data-number="12.2.4">
<h3 data-number="12.2.4" class="anchored" data-anchor-id="métodos"><span class="header-section-number">12.2.4</span> Métodos</h3>
<p>Na aula passada vocês aprenderam que no Python, a maior parte dos construtos da linguagem são classes, e isso não é exceção para os <em>ndarrays</em>. Cada array é um objeto, uma instância dessa classe, e tem seus métodos.</p>
<p>A lista completa de métodos pode ser vista na <a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html">documentação da classe</a>. Alguns interessantes são:</p>
<ul>
<li><code>.tolist()</code>.</li>
<li><code>.sum()</code> e <code>.prod()</code>; <code>.cumsum()</code> e <code>.cumprod()</code>.</li>
<li><code>.all()</code> e <code>.any()</code>.</li>
<li><code>.max()</code> e <code>.min()</code>; <code>.argmax()</code> e <code>.argmin()</code>.</li>
<li><code>mean()</code>, <code>.var()</code> e <code>.std()</code>.</li>
<li><code>.sort()</code>; <code>.argsort()</code>.</li>
<li><code>.choose()</code>.</li>
<li><code>.round()</code>.</li>
<li>Em breve, vamos falar um pouco mais sobre:
<ul>
<li><code>.resise()</code>, <code>.reshape()</code>, e <code>.transpose()</code>; <code>flatten()</code> e <code>.ravel()</code>.</li>
<li><code>.copy()</code> e <code>.view()</code>.</li>
</ul></li>
</ul>
</section>
</section>
<section id="operações-com-arrays" class="level2" data-number="12.3">
<h2 data-number="12.3" class="anchored" data-anchor-id="operações-com-arrays"><span class="header-section-number">12.3</span> 1.3 Operações com Arrays</h2>
<p>Lembre-se que o ponto mais importante é a vetorização. O numpy define “funções universais”, funções que podem ser aplicadas de forma vetorizadas.</p>
<p>Os exemplos abaixo são bem expositivos, são as funções que vocês já conhecem, apresentadas rapidamente.</p>
<section id="operações-aritmétricas" class="level4" data-number="12.3.0.1">
<h4 data-number="12.3.0.1" class="anchored" data-anchor-id="operações-aritmétricas"><span class="header-section-number">12.3.0.1</span> Operações aritmétricas</h4>
<p>Veja mais em <a href="https://numpy.org/doc/stable/reference/routines.math.html">API Ref. → Routines → Mathematical functions</a>.</p>
<div id="7fefea36" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>a1, a2 <span class="op">=</span> np.array([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]), np.array([<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>])</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.subtract(a1, a2), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>) <span class="co">#a1 + a2</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.divide(a1, a2), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>) <span class="co">#a1 * a2</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.exp(a1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.sqrt(a1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.sin(a1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.log(a1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Também considere as constantes abaixo. Mais informações em <a href="https://numpy.org/doc/stable/reference/constants.html">API Ref. → Constants</a>.</p>
<div id="ccef290c" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>np.pi, np.e, np.nan, np.inf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="operações-matriciais" class="level4" data-number="12.3.0.2">
<h4 data-number="12.3.0.2" class="anchored" data-anchor-id="operações-matriciais"><span class="header-section-number">12.3.0.2</span> Operações matriciais</h4>
<p>Veja mais em <a href="https://numpy.org/doc/stable/reference/routines.linalg.html">API Ref. → Routines → Linear algebra</a>.</p>
<div id="aababeb3" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>a1, a2 <span class="op">=</span> np.array([(<span class="dv">1</span>,<span class="dv">2</span>), (<span class="op">-</span><span class="dv">1</span>,<span class="op">-</span><span class="dv">3</span>)]), np.array([(<span class="dv">4</span>,<span class="dv">5</span>), (<span class="op">-</span><span class="dv">4</span>,<span class="op">-</span><span class="dv">6</span>)]) <span class="co"># Note o uso, indiferenciável, de tuplas</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a1 <span class="op">*</span> a2, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.dot(a1, a2), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>) <span class="co">#a1 @ a2</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.linalg.matrix_power(a1, <span class="dv">3</span>), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.linalg.det(a1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.linalg.inv(a1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.linalg.norm(a1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.linalg.eig(a1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="operações-com-strings" class="level4" data-number="12.3.0.3">
<h4 data-number="12.3.0.3" class="anchored" data-anchor-id="operações-com-strings"><span class="header-section-number">12.3.0.3</span> Operações com strings</h4>
<p>Veja mais em <a href="https://numpy.org/doc/stable/reference/routines.char.html">API Ref. → Routines → String operations</a>.</p>
<div id="31b7f440" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>a1, a2 <span class="op">=</span> np.array([<span class="st">'olá'</span>, <span class="st">'oi'</span>, <span class="st">'oopa'</span>]), np.array([<span class="st">', tudo bem?'</span>, <span class="st">', bem?'</span>, <span class="st">', bão?'</span>])</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.char.add(a1, a2), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.char.multiply(a1, [<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>]), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.char.capitalize(a1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.char.count(a1, <span class="st">'o'</span>), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.char.find(a1, <span class="st">'o'</span>), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="operações-lógicasde-comparação" class="level4" data-number="12.3.0.4">
<h4 data-number="12.3.0.4" class="anchored" data-anchor-id="operações-lógicasde-comparação"><span class="header-section-number">12.3.0.4</span> Operações lógicas/de comparação</h4>
<p>Veja mais em <a href="https://numpy.org/doc/stable/reference/routines.logic.html">API Ref. → Routines → Logic functions</a>. Também veja operações de sets em <a href="https://numpy.org/doc/stable/reference/routines.set.html">API Ref. → Routines → Set functions</a>.</p>
<div id="ad9a020b" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>a1, a2 <span class="op">=</span> np.array([(<span class="dv">1</span>,<span class="dv">2</span>), (<span class="op">-</span><span class="dv">1</span>,<span class="op">-</span><span class="dv">3</span>)]), np.array([(<span class="dv">4</span>,<span class="dv">5</span>), (<span class="op">-</span><span class="dv">4</span>,<span class="op">-</span><span class="dv">6</span>)])</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.greater(a1, a2), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>) <span class="co">#a1 &gt; a2</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>((a1 <span class="op">==</span> a2).<span class="bu">any</span>(), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>) <span class="co">#note the usage of ()</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.logical_or(a1 <span class="op">&gt;</span> <span class="dv">1</span>, a2 <span class="op">&lt;</span> <span class="dv">0</span>), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>) <span class="co">#a1 &gt; 1 or a2 &lt; 0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="operações-estatísticas" class="level4" data-number="12.3.0.5">
<h4 data-number="12.3.0.5" class="anchored" data-anchor-id="operações-estatísticas"><span class="header-section-number">12.3.0.5</span> Operações estatísticas</h4>
<p>Veja mais em <a href="https://numpy.org/doc/stable/reference/routines.statistics.html">API Ref. → Routines → Statistics</a>.</p>
<div id="72792a07" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>a1 <span class="op">=</span> np.random.normal(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">100000</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>a2 <span class="op">=</span> a1 <span class="op">+</span> np.random.normal(<span class="dv">0</span>, <span class="fl">0.5</span>, <span class="dv">100000</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.mean(a1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.median(a1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.std(a1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.quantile(a1, <span class="fl">0.25</span>), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.corrcoef(a1, a2), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="subsetting-e-copying" class="level2" data-number="12.4">
<h2 data-number="12.4" class="anchored" data-anchor-id="subsetting-e-copying"><span class="header-section-number">12.4</span> 1.4 Subsetting e Copying</h2>
<p>A referência básica está em <a href="https://numpy.org/doc/stable/user/basics.indexing.html">User guide → Indexing on ndarrays</a>.</p>
<p>A indexação de arrays é feita de forma similar à listas, com <code>a1[algo]</code>. A maioria das técnicas disponíveis para listas está disponível aqui também.</p>
<p>Essa parte é bem útil, porque lógicas similares de indexação podem ser utilizadas no pandas e em listas.</p>
<section id="subseting-básico" class="level3" data-number="12.4.1">
<h3 data-number="12.4.1" class="anchored" data-anchor-id="subseting-básico"><span class="header-section-number">12.4.1</span> Subseting básico</h3>
<p>Com uma dimensão, é simples. Conseguimos utilizar a técnica de indexes negativos.</p>
<div id="77c7df07" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>a1 <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>])</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a1, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a1[<span class="dv">0</span>])</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a1[<span class="op">-</span><span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>E com duas dimensões? Agora, temos que informar o que queremos pegar de cada dimensão, <code>a2[algo1, algo2]</code>:</p>
<div id="1a34c825" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>a2 <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], [<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>], [<span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>]])</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a2, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a2[<span class="dv">0</span>, <span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>E se eu quiser selecionar mais do que um elemento? Aqui, também é possível utilizar a técnica de slicing <code>:</code>.</p>
<div id="c746a360" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a1[<span class="dv">1</span>:<span class="dv">3</span>])</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a1[<span class="dv">1</span>:])</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a1[:<span class="dv">2</span>])</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a1[:])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Com duas dimensões é a mesma ideia, lembrando que precisamos falar o que queremos pegar de ambas as dimensões, as possibilidades aumentam.</p>
<div id="d6fd78d1" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a2[<span class="dv">0</span>, <span class="dv">0</span>:<span class="dv">2</span>])</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a2[<span class="dv">0</span>:<span class="dv">2</span>, <span class="dv">1</span>])</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a2[<span class="dv">1</span>:, :])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Com <em>n</em> dimensões é a mesma ideia, com uma entrada em <code>[]</code> para cada dimensão.</p>
<p>Se tiver curiosidade, veja dois truques usando <code>...</code> e <code>None</code> nos índices <a href="https://numpy.org/doc/stable/user/basics.indexing.html#dimensional-indexing-tools">aqui</a>.</p>
<div id="1a718929" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>an <span class="op">=</span> np.arange(<span class="dv">3</span><span class="op">**</span><span class="dv">3</span>).reshape(<span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(an[<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>])</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(an[<span class="dv">0</span>, :, :])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Quando você ficar pica, vai descobrir que dá para omitir dimensões, como abaixo. Mas por enquanto, não inventa, coloque um “algo” para cada dimensão, nem que o “algo” seja “selecione tudo” (<code>:</code>).</p>
<div id="87f383e9" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a3[<span class="dv">0</span>:])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note que essa noção do subset deixa claro qual é a “ordem” dos componentes de um array multidimensional. Isto é, quando pedimos <code>for i in a3</code>, o que será passado para <code>i</code>? Cada elemento? Cada coluna, cada linha? cada matriz?</p>
<div id="d78cd68c" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> a3:</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> mat:</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> k <span class="kw">in</span> row: <span class="bu">print</span>(i)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Vemos que, do array tridimensional <code>a3</code>, <code>i</code> são as sub-matrizes, <code>j</code> são as linhas de uma sub-matriz, e <code>i</code> os elementos de cada linha. Isto é, a ordem é da maior/última/mais alta dimensão para a menor/mais baixa.</p>
</section>
<section id="subseting-avançado" class="level3" data-number="12.4.2">
<h3 data-number="12.4.2" class="anchored" data-anchor-id="subseting-avançado"><span class="header-section-number">12.4.2</span> Subseting avançado</h3>
<p>E se os índices que você quer obter estão em uma coleção? Podemos utilizar coleções de inteiros ou booleanos para acessar índices também!</p>
<div id="d301b579" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a1[np.array([<span class="dv">1</span>, <span class="dv">2</span>])]) <span class="co">#a1[[1, 2]]</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>a1[np.array([<span class="va">True</span>, <span class="va">False</span>, <span class="va">False</span>, <span class="va">True</span>])] <span class="co">#print(a1[[True, False, False, True]])</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note que para booleanos, o índice-coleção precisa ser do mesmo tamanho da dimensão relevante.</p>
<p>O legal, é que da para utilizar isso para criar <em>filtros</em>:</p>
<div id="1ac03017" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a1[a1 <span class="op">+</span> <span class="dv">1</span> <span class="op">&gt;</span> <span class="dv">2</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Existem muitas outras técnicas utilizando essas ferramentas. Veja mais <a href="https://numpy.org/doc/stable/user/basics.indexing.html#advanced-indexing">aqui</a>.</p>
</section>
<section id="copy-versus-view" class="level3" data-number="12.4.3">
<h3 data-number="12.4.3" class="anchored" data-anchor-id="copy-versus-view"><span class="header-section-number">12.4.3</span> Copy versus view</h3>
<p><strong>Um último comentário técnico, eu juro!</strong></p>
<p>E aquela história insuportável de <code>x = ...</code>, <code>y = x</code>, e uma mudança inocente em <code>y</code> quebrando seu código porque <code>x</code> mudou também? Como fica isso no numpy?</p>
<p>Segue existindo 😴. Vou falar uma das frases já faladas abaixo, mas não se assuste.</p>
<blockquote class="blockquote">
<p>No python, variáveis sempre são nomes referenciados a valores, <em>mutating</em> um valor – diferente de <em>rebinding</em> um valor – mostrará essa mudança em todos os nomes associados à ele.</p>
</blockquote>
<p>Isto é, essa questão é bem geral no python. Infelizmente, não é hora de entrar em detalhes na lógica por trás de tudo isso. Para saber mais, eu gosto muito <a href="https://nedbatchelder.com/text/names.html">desse post</a>.</p>
<p>O que precisamos saber agora é que sim, ainda estamos preocupados em criar <code>.copy()</code>’s dos arrays. Como uma regra de bolso, a menos que você de fato queira a referência ao objeto original, adicione o <code>.copy()</code>.</p>
<p>Note que essa questão está bem presente: quando fazemos <code>y = x[1, :]</code>, y é uma cópia ou uma referência? Não é obvio, e varia de caso a caso. Não vou entrar em detalhes, mas o ponto é, tome cuidado, e use cópias sem medo.</p>
<p>Um último ponto, que também não merece detalhe, é a existência de uma “semi-cópia”, ou <em>shallow-copy</em>, <code>x.view()</code>. Quais são as diferenças, quando eu uso um ou o outro? Meia noite eu te conto. Brincadeira, mas realmente, não vale falar sobre isso agora.</p>
<p><strong>Fim!</strong></p>
<p>Pronto! Vocês aprenderam o básico de numpy! Agora, podemos aplicar esse novo jeito de pensar para bases de dados, e conhecer a biblioteca especializada nisso, o pandas. Especialmente, relembre do que aprendemos, sobre a maneira de se pensar em dados vetorizados.</p>
<p>Existem dois temas adicionais, manipulação de arrays (mudar o formato, adicionar itens, combinar, e dividir), e funções universais (tecnicas poderosas que as funções do numpy habilitam).</p>
</section>
</section>
</section>
<section id="pandas" class="level1" data-number="13">
<h1 data-number="13"><span class="header-section-number">13</span> 2. Pandas</h1>
<section id="introdução-1" class="level2" data-number="13.1">
<h2 data-number="13.1" class="anchored" data-anchor-id="introdução-1"><span class="header-section-number">13.1</span> 2.1 Introdução</h2>
<p>O site oficial da biblioteca Pandas introduz ela da seguinte forma:</p>
<blockquote class="blockquote">
<p>“Pandas is a Python package providing fast, flexible, and expressive data structures <strong>designed to make working with “relational” or “labeled” data</strong> both easy and intuitive. It aims to be the fundamental high-level building block <strong>for doing practical, real-world data analysis in Python</strong>. (…) Pandas is <strong>built on top of NumPy</strong> and is intended to integrate well within a scientific computing environment with many other 3rd party libraries.”</p>
</blockquote>
<p>Veremos nessa aula as mais diversas aplicações dessa biblioteca e seremos apresentados a “tipos” de dados semelhantes aos vistos anteriormente, porém, no Pandas.</p>
<p>Vamos começar!</p>
<hr>
<p>Para instalação da biblioteca, basta utilizar do código de instalação:</p>
<pre><code># pip install pandas</code></pre>
<p><em>Em caso de dúvidas, recomendamos acessar a aba de instalação do site: https://pandas.pydata.org/docs/getting_started/install.html</em></p>
<hr>
<section id="benefícios-do-pandas" class="level3" data-number="13.1.1">
<h3 data-number="13.1.1" class="anchored" data-anchor-id="benefícios-do-pandas"><span class="header-section-number">13.1.1</span> <strong>Benefícios do Pandas:</strong></h3>
<p>Você está buscando uma maneira eficiente e poderosa de manipular e analisar dados em Python? Apresentamos o Pandas, a biblioteca que revoluciona a forma como lidamos com dados tabulares! É a escolha ideal para qualquer pessoa que deseja realizar análises de dados de maneira eficiente, flexível e poderosa em Python.</p>
<p>Alguns pontos de destaque da biblioteca são:</p>
<ul>
<li><p><strong>Facilidade de Uso:</strong> Manipule dados de forma simples e intuitiva, com estruturas de dados familiares como DataFrames e Séries, sem a complexidade de lidar diretamente com arrays ou listas.</p></li>
<li><p><strong>Flexibilidade de Dados:</strong> Armazene e trabalhe com dados de diferentes tipos (números, strings, datas, booleanos) em uma única estrutura.</p></li>
<li><p><strong>Operações Eficientes:</strong> Realize operações de manipulação de dados de forma rápida e eficiente, incluindo seleção, filtragem, ordenação, agrupamento, agregação e junção de dados de diferentes fontes.</p></li>
<li><p><strong>Tratamento de Dados Ausentes:</strong> Lide facilmente com valores ausentes (NaN) em seus dados, com métodos integrados para detecção, preenchimento, remoção ou substituição desses valores, garantindo a integridade dos seus resultados.</p></li>
<li><p><strong>Integração com Outras Ferramentas:</strong> Importe e exporte dados de e para uma variedade de formatos, como CSV, Excel, SQL, JSON, HTML, entre outros, facilitando a integração com outras ferramentas e sistemas.</p></li>
<li><p><strong>Comunidade Ativa e Suporte:</strong> Faça parte de uma comunidade vibrante de usuários, com vasta documentação, tutoriais e suporte online, garantindo que você tenha o apoio necessário para aproveitar ao máximo o potencial do Pandas.</p></li>
</ul>
<section id="series-e-dataframe" class="level4" data-number="13.1.1.1">
<h4 data-number="13.1.1.1" class="anchored" data-anchor-id="series-e-dataframe"><span class="header-section-number">13.1.1.1</span> <strong>Series e dataframe:</strong></h4>
<p>O pandas se beneficia do uso de duas estruturas de dados principais (que se assemelham, até certo ponto, aos arrays que vimos anteriormente).</p>
<p>A primeira delas, nomeada de <em>Series</em>, é uma estrutura de dados <strong>unidimensional</strong> que pode conter qualquer tipo de dado, sendo semelhante a uma matriz unidimensional ou a uma coluna em uma tabela.</p>
<p>O <em>dataframe</em> se difere das <em>Series</em> por ser uma estrutura de dados <strong>bidimencional</strong> que se organiza em linhas e colunas, semelhantes a uma tabela de banco de dados ou uma planilha do Excel, e são muito usados em ciência de dados, análises financeiras, pesquisas acadêmicas, entre outros.</p>
</section>
</section>
</section>
<section id="básico-sobre-series-e-dataframes" class="level2" data-number="13.2">
<h2 data-number="13.2" class="anchored" data-anchor-id="básico-sobre-series-e-dataframes"><span class="header-section-number">13.2</span> 2.2 Básico Sobre Series e Dataframes</h2>
<section id="como-podemos-criar-essas-estruturas-de-dados" class="level3" data-number="13.2.1">
<h3 data-number="13.2.1" class="anchored" data-anchor-id="como-podemos-criar-essas-estruturas-de-dados"><span class="header-section-number">13.2.1</span> <strong>Como podemos criar essas estruturas de dados?</strong></h3>
<p>Para montarmos uma Series, utilizamos do comando pandas.Series(dados). Tenham em mente que esses dados podem estar em listas, dicinários, arrays…</p>
<div id="1e32a1eb" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> pd.Series({<span class="st">"a"</span>:[<span class="st">"a"</span>, <span class="st">"do"</span>, <span class="st">"le"</span>, <span class="st">"ta"</span>],<span class="st">"b"</span>:[<span class="st">"baby"</span>,<span class="st">"shark"</span>]})</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>s2 <span class="op">=</span> pd.Series([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="st">"a"</span>])</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>s3 <span class="op">=</span> pd.Series([<span class="dv">1</span>,<span class="dv">2</span>]) <span class="co">#cria um index + dados</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>s4 <span class="op">=</span> pd.Series([<span class="dv">3</span>,<span class="dv">4</span>],[<span class="dv">7</span>,<span class="dv">8</span>]) <span class="co"># usa o primeiro como dado + segundo como index</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>s4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Já ao montarmos um DataFrame, usamos o comando pd.DataFrame(dados). Esses dados tem que ter o mesmo tamanho (lenght) para que possa ser criado.</p>
<div id="7f88c8bd" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">"a"</span>:[<span class="st">"a"</span>, <span class="st">"do"</span>, <span class="st">"le"</span>, <span class="st">"ta"</span>], <span class="st">"b"</span>:[<span class="st">"baby"</span>,<span class="st">"shark"</span>,<span class="st">"tutu"</span>,<span class="st">"tuturu"</span>]})</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co">#dfErrado = pd.DataFrame({"e":["r","r","a","d","o"], "E":["r","r","o"]})</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="96b36971" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos, também, montar "na marra" o Data Frame:</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame([[<span class="dv">19</span>, <span class="dv">0</span>, <span class="st">"F"</span>], [<span class="dv">20</span>, <span class="dv">1</span>, <span class="st">"F"</span>], [<span class="dv">60</span>, <span class="dv">2</span>, <span class="st">"M"</span>]], index<span class="op">=</span>[<span class="st">"Júlia"</span>, <span class="st">"Mariana"</span>, <span class="st">"Antonio"</span>], columns<span class="op">=</span>[<span class="st">'Nome'</span>, <span class="st">'Filhos'</span>, <span class="st">'Sexo'</span>])</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="outras-fontes" class="level3" data-number="13.2.2">
<h3 data-number="13.2.2" class="anchored" data-anchor-id="outras-fontes"><span class="header-section-number">13.2.2</span> <strong>Outras Fontes:</strong></h3>
<p>Podemos, a partir de dados da internet ou coleta de dados manuais, usar o Pandas para acessar base de dados. Segue alguns exemplos:</p>
<pre><code>pd.read_excel(arquivo)
pd.read_CVS(arquivo)
pd.read_sql(arquivo)
</code></pre>
<p>Obs: o “arquivo” se refere a um url do arquivo ou um “endereço” de arquivo no computador do usuário.</p>
<p><em>Mais ferramentas: https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html</em></p>
</section>
<section id="summarise" class="level3" data-number="13.2.3">
<h3 data-number="13.2.3" class="anchored" data-anchor-id="summarise"><span class="header-section-number">13.2.3</span> Summarise:</h3>
<p>De forma geral, temos algumas ferramentas principais para condensar dados com diferentes objetivos.</p>
<p>Antes disso, veremos alguma ferramentas úteis para possíveis estudos da base:</p>
<ul>
<li>Número de Linhas e colunas no dataframe:</li>
</ul>
<pre><code>df.shape</code></pre>
<pre><code>df["valor"].value_counts() #retorna um número inteiro</code></pre>
<ul>
<li>Número de valores únicos em uma coluna:</li>
</ul>
<pre><code>df["coluna"].nunique()</code></pre>
<ul>
<li>Estatísticas e Bescrições Básicas para cada coluna:</li>
</ul>
<pre><code>df.describe()</code></pre>
<p>O pandas fornece um grande conjunto de funções de resumo que operam em diferentes tipos de objetos do pandas (colunas de DataFrame, Series, GroupBy, Expanding e Rolling (ver abaixo)) e produzem valores únicos para cada um dos grupos. Quando aplicado a um DataFrame, o resultado é retornado como uma Series do pandas para cada coluna.</p>
<p>Importante: verifique o <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/basics.html#descriptive-statistics">link oficial</a> da página para saber mais</p>
<section id="group-data" class="level4" data-number="13.2.3.1">
<h4 data-number="13.2.3.1" class="anchored" data-anchor-id="group-data"><span class="header-section-number">13.2.3.1</span> Group Data:</h4>
<p>O “Group Data” (ou “Agrupamento de Dados”) na biblioteca Pandas refere-se a uma operação fundamental de análise de dados, na qual você divide um conjunto de dados em grupos com base em determinados critérios e, em seguida, aplica operações ou funções a esses grupos. Isso é feito principalmente usando o método .groupby() do Pandas.</p>
<p>Importante! Acesse https://pandas.pydata.org/pandas-docs/stable/user_guide/groupby.html para saber mais.</p>
</section>
</section>
</section>
<section id="subset" class="level2" data-number="13.3">
<h2 data-number="13.3" class="anchored" data-anchor-id="subset"><span class="header-section-number">13.3</span> 2.3 Subset</h2>
<p>Os subconjuntos são porções específicas de um DataFrame que podem ser selecionadas com base em critérios como linhas, colunas ou ambos.</p>
<p>Existem três tipos principais de subconjuntos: linhas, colunas e linhas e colunas simultaneamente.</p>
<section id="subset-linhas" class="level3" data-number="13.3.1">
<h3 data-number="13.3.1" class="anchored" data-anchor-id="subset-linhas"><span class="header-section-number">13.3.1</span> Subset linhas</h3>
<p>Para estudarmos os tópicos abaixo, vamos usar uma planilha fictícia.</p>
<div id="9a773852" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>arquivo <span class="op">=</span> <span class="st">"Clientes.xlsx"</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_excel(arquivo)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Nesse exemplo, a base de dados é extremamente pequena então não temos problema em rodarmos os dados. Em casos mais complexos, podemos pedir que o programa rode apenas os dados que precisamos para a manipulação.</p>
<div id="ed6ff5be" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Podemos apenas rodar a primeira linha (rótulos das colunas) quando a base é muito grande</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>df.head()</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co">#ou as primeiras x linhas</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>df.head(<span class="dv">2</span>)</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="co">#ou as últimas x linhas</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>df.tail()</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>df.tail(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Para mostrar alguma das fórmulas que temos a nossa disposição, vamos imaginar que você é estagiário desse estabelecimento: quais dados podemos tirar dessa tabela?</p>
<div id="88b3ada3" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Primeiramente, vamos ver se os dados respeitam uma sequência lógica</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>subset1 <span class="op">=</span> df[df[<span class="st">"Idade"</span>]<span class="op">&lt;</span><span class="dv">100</span>]  <span class="co">#não faz sentido ter uma pessoa de mais de 100 anos</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>subset2 <span class="op">=</span> subset1[subset1[<span class="st">"Idade"</span>] <span class="op">&gt;</span> <span class="dv">18</span>]  <span class="co">#não faz sentido um "cliente" ser menor de idade</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>subset3 <span class="op">=</span> subset2.drop(columns <span class="op">=</span> <span class="st">"Nome.1"</span>)</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>DF <span class="op">=</span> subset3</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>DF</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="75239a9b" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">#agora, vamos analisar mais a fundo a tabela:</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>Inad <span class="op">=</span> DF[DF[<span class="st">"Inadimplente"</span>] <span class="op">==</span> <span class="va">True</span>]  <span class="co">#mais pra frente, ainda nessa aula, aprenderemos uma maneria relativamente mais simples para fazer isso (query)</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>NãoInad <span class="op">=</span> DF[DF[<span class="st">"Inadimplente"</span>] <span class="op">==</span> <span class="va">False</span>]</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>InadMaior <span class="op">=</span> DF[(DF[<span class="st">"Inadimplente"</span>] <span class="op">==</span> <span class="va">True</span>) <span class="op">&amp;</span> (DF[<span class="st">"Idade"</span>] <span class="op">&gt;</span> <span class="dv">18</span>)] <span class="co">#nessa base de dados, nós já tiramos os Inad menores de idade mas vale o exemplo</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>Estado <span class="op">=</span> DF[(DF[<span class="st">"Estado"</span>] <span class="op">==</span> <span class="st">"SP"</span>) <span class="op">|</span> (DF[<span class="st">"Estado"</span>] <span class="op">==</span> <span class="st">"TO"</span>)]</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>MaisVelhos <span class="op">=</span> DF.nlargest(<span class="dv">3</span>,<span class="st">"Idade"</span>)</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>MaisNovos <span class="op">=</span> DF.nsmallest(<span class="dv">3</span>,<span class="st">"Idade"</span>)</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a><span class="co">#Inad</span></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a><span class="co">#NãoInad</span></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a><span class="co">#InadMaior</span></span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a><span class="co">#Estado</span></span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a><span class="co">#MaisNovos</span></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a><span class="co">#MaisVelhos</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Da mesma forma que podemos selecionar com base nos critérios selecionados, podemos usar de funções que aleatorizem os dados:</p>
<div id="e6825470" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>DF.sample(frac <span class="op">=</span> <span class="fl">0.5</span>) <span class="co">#aqui, pedimos para que o programa nos recorte uma fração aleatória do dataframe</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="7e12a4b6" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>DF.sample(n<span class="op">=</span><span class="dv">9</span>) <span class="co">#ou podemos dar um valor para o tamanho da amostra aleatória</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Outra ferramenta para essas seleções é a <em>query</em>. Seu maior diferencial é que essa ferramenta permite usar a lógica Booleana para filtrar as linhas.</p>
<div id="be8708b4" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">#A lógica booleana faz com que o critério de seleção seja verificar se uma afirmação, a nossa escolha, é verdadeira ou falsa</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>DF.query(<span class="st">'Idade &gt; 50'</span>) <span class="co">#ele seleciona cada linha que a resposta de Idade&gt;50 == True</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>DF.query(<span class="st">'Nome.str.len() &gt; 5'</span>) <span class="co">#ele seleciona cada linha cujo comprimento do nome seja maior que 5</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>DF.query(<span class="st">'Idade &gt; 40 and Estado == "SP"'</span>)</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>DF.query(<span class="st">'Inadimplente == True and Dívida &gt; 1000'</span>)</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>DF.query(<span class="st">'Nome.str.startswith("B")'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="subset-colunas" class="level3" data-number="13.3.2">
<h3 data-number="13.3.2" class="anchored" data-anchor-id="subset-colunas"><span class="header-section-number">13.3.2</span> Subset colunas</h3>
<p>Agora, vamos avançar para o próximo passo e aprender como criar subconjuntos de colunas. Os subconjuntos de colunas nos permitem focar em variáveis específicas dos nossos dados, facilitando a análise e visualização de informações relevantes.</p>
<div id="73392b6f" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Para selecionar apenas algumas colunas, temos um "modelo" base que seguimos</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>DF[<span class="st">"Nome"</span>]</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>DF.Nome</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>DF[[<span class="st">"Nome"</span>,<span class="st">"Idade"</span>]]</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>DF[[<span class="st">"Nome"</span>,<span class="st">"Inadimplente"</span>,<span class="st">"Dívida"</span>]]</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="co">#e se quisermos o nome e a dívida dos inadimplentes?</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>Corte1 <span class="op">=</span> DF[[<span class="st">"Nome"</span>, <span class="st">"Inadimplente"</span>, <span class="st">"Dívida"</span>]]</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>Corte2 <span class="op">=</span> Corte1[DF[<span class="st">"Inadimplente"</span>] <span class="op">==</span> <span class="va">True</span>]</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>Corte3 <span class="op">=</span> Corte2[[<span class="st">"Nome"</span>, <span class="st">"Dívida"</span>]]</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>Corte3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="subset-os-dois-juntos" class="level3" data-number="13.3.3">
<h3 data-number="13.3.3" class="anchored" data-anchor-id="subset-os-dois-juntos"><span class="header-section-number">13.3.3</span> Subset os dois juntos</h3>
<p>Nós vimos que podemos manipular a base de dados de forma a filtrarmos linhas e colunas de forma individual. Agora, veremos algumas funções que unificam essas tarefas, ou seja, <strong>atua com as colunas e linhas</strong>.</p>
<section id="iloc-e-loc" class="level4" data-number="13.3.3.1">
<h4 data-number="13.3.3.1" class="anchored" data-anchor-id="iloc-e-loc"><span class="header-section-number">13.3.3.1</span> iloc e loc:</h4>
<p>Começando pelo <em>iloc</em>, essa função é usada para acessar os dados de um DataFrame usando índices inteiros. Você pode usar o iloc para selecionar linhas e colunas com base em sua posição numérica no DataFrame. Ou seja, temos a posição do que queremos e usamos ele para selecionar o necessário.</p>
<p>Já o <em>loc</em> é usado para acessar os dados de um DataFrame usando rótulos de índice. O loc permite selecionar linhas e colunas com base nos rótulos definidos para o índice e as colunas. Ou seja, sabemos o que queremos mas buscamos sua posição.</p>
<div id="b25aedc7" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">#DF.iloc[1,0]  #linha da posição 1 (segunda linha) na coluna de posição 0 (primeira coluna)</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="co">#DF.iloc[10:20] #Select rows 10-20.</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>DF.iloc[:, [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>]] <span class="co">#Select columns in positions 1, 2 and 5  e todas as linhas</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>DF.iloc[[<span class="dv">0</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>],:] <span class="co">#Seleciona as linhas nas posições 0, 5, 10 e 15 e todas as colunas</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="384359d6" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>DF.loc[:, <span class="st">'Idade'</span>:<span class="st">'Inadimplente'</span>] <span class="co">#Select all columns between x2 and x4 (inclusive).</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>DF.loc[<span class="st">"Jaime"</span>:<span class="st">"Fred"</span>, :] <span class="co">#Seleciona todas as linhas entre "Jaime" e "Fred"</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>DF.loc[df[<span class="st">'Idade'</span>] <span class="op">&gt;</span> <span class="dv">10</span>, [<span class="st">'Inadimplente'</span>, <span class="st">'Estado'</span>]]  <span class="co">#Select rows meeting logical condition, and only the specific columns .</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#só as linhas que</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="iat-e-at" class="level4" data-number="13.3.3.2">
<h4 data-number="13.3.3.2" class="anchored" data-anchor-id="iat-e-at"><span class="header-section-number">13.3.3.2</span> iat e at:</h4>
<p>Essas ferramentas são semelhantes ao ‘iloc’ e ‘loc’ que vimos, mas são usados para acessar valores únicos em um DataFrame, seja usando índices inteiros (posições) ou rótulos de índice, respectivamente.</p>
<p>A ferramenta <code>iat</code> é mais eficiente para acesso baseado em posição, se baseando em índices para achar o valor, enquanto <code>at</code> é mais eficiente para acesso baseado em rótulos.</p>
<div id="90030de3" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>DF.iat[<span class="dv">0</span>,<span class="dv">0</span>] <span class="co">#primeira linha da primeira coluna</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>DF.iat[<span class="dv">0</span>,<span class="dv">1</span>] <span class="co">#primeira linha da segunda coluna</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>DF.iat[<span class="dv">1</span>,<span class="dv">0</span>] <span class="co">#segunda linha da primeira coluna</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>DF.iat[<span class="dv">9</span>,<span class="dv">4</span>] <span class="co">#décima linha da quinta coluna</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="74a33bd1" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>DF.at[<span class="dv">0</span>, <span class="st">"Idade"</span>] <span class="co">#nós damos o rótulo/index e a coluna na qual ele deve procura-lo</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="co">#DF.at[3, "Nome"]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Resumindo, use <code>iloc</code>/<code>loc</code> quando precisar acessar múltiplos valores ou fatias de dados e <code>iat</code>/<code>at</code> quando precisar acessar um único valor de forma eficiente. A escolha entre <code>iloc</code>/<code>loc</code> ou <code>iat</code>/<code>at</code> depende do tipo de operação que você está realizando e se está trabalhando com acessos únicos ou múltiplos no DataFrame.</p>
<p>Resumindo, use <code>iloc</code>/<code>loc</code> quando precisar acessar múltiplos valores ou fatias de dados e <code>iat</code>/<code>at</code> quando precisar acessar um único valor de forma eficiente. A escolha entre <code>iloc</code>/<code>loc</code> ou <code>iat</code>/<code>at</code> depende do tipo de operação que você está realizando e se está trabalhando com acessos únicos ou múltiplos no DataFrame.</p>
</section>
</section>
</section>
<section id="operarcriar" class="level2" data-number="13.4">
<h2 data-number="13.4" class="anchored" data-anchor-id="operarcriar"><span class="header-section-number">13.4</span> 2.4 Operar/Criar</h2>
<section id="operações-em-colunas" class="level4" data-number="13.4.0.1">
<h4 data-number="13.4.0.1" class="anchored" data-anchor-id="operações-em-colunas"><span class="header-section-number">13.4.0.1</span> Operações em colunas</h4>
<div id="3ffdc896" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {<span class="st">'A'</span>: [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>],</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>        <span class="st">'B'</span>: [<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>]}</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(data)</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="581a6574" class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Adicionando uma nova coluna</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'C'</span>] <span class="op">=</span> [<span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>]</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="1d5e2c11" class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Renomeando uma coluna</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>df.rename(columns<span class="op">=</span>{<span class="st">'A'</span>: <span class="st">'A_Novo'</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="b87d9bf1" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicando uma fórmula a uma coluna</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'B_quadrado'</span>] <span class="op">=</span> df[<span class="st">'B'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: x <span class="op">**</span> <span class="dv">2</span>)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'B/2'</span>] <span class="op">=</span> df[<span class="st">'B'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: x <span class="op">/</span> <span class="dv">2</span>)</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'A+2'</span>] <span class="op">=</span> df[<span class="st">'A_Novo'</span>] <span class="op">+</span> <span class="dv">2</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'A-2'</span>] <span class="op">=</span> df[<span class="st">'A_Novo'</span>] <span class="op">-</span> <span class="dv">2</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="edfb78d0" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Removendo uma coluna</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>df.drop(columns<span class="op">=</span>[<span class="st">'B_quadrado'</span>], inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="8818c12f" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Adicionando duas colunas e armazenando o resultado em uma nova coluna</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'A+B'</span>] <span class="op">=</span> df[<span class="st">'A_Novo'</span>] <span class="op">+</span> df[<span class="st">'B'</span>]</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="43a64e00" class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Encontrando a soma de uma coluna</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>soma_B <span class="op">=</span> df[<span class="st">'B'</span>].<span class="bu">sum</span>()</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>soma_B</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="c3e027db" class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Encontrando a média de uma coluna</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>media_B <span class="op">=</span> df[<span class="st">'B'</span>].mean()</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>media_B</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="6653adc8" class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtrando linhas com base em uma condição em uma coluna</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>df_filtrado <span class="op">=</span> df[df[<span class="st">'A_Novo'</span>] <span class="op">&gt;</span> <span class="dv">2</span>]</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>df_filtrado</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="e0987bd0" class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicando a função 'sqrt' a todos os elementos da coluna 'C'</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'C'</span>] <span class="op">=</span> np.sqrt(df[<span class="st">'C'</span>])</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="operações-em-linhas-e-células" class="level4" data-number="13.4.0.2">
<h4 data-number="13.4.0.2" class="anchored" data-anchor-id="operações-em-linhas-e-células"><span class="header-section-number">13.4.0.2</span> Operações em linhas e células</h4>
<div id="c9e44dd5" class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicando uma função em todas as linhas</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>soma_por_linha <span class="op">=</span> df.<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>soma_por_linha</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="93295efd" class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecionando uma célula específica</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>valor_celula <span class="op">=</span> df.at[<span class="dv">0</span>, <span class="st">'B'</span>]</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>valor_celula</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cda21601" class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Atualizando o valor de uma célula específica</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>df.at[<span class="dv">0</span>, <span class="st">'B'</span>] <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="2ec0554c" class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicando uma função em uma célula específica</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>df.at[<span class="dv">0</span>, <span class="st">'B'</span>] <span class="op">=</span> df.at[<span class="dv">0</span>, <span class="st">'B'</span>] <span class="op">*</span> <span class="dv">2</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="809add80" class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Removendo uma linha pelo índice</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>df.drop(index<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="4377828c" class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Inserindo uma nova linha</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {<span class="st">'A'</span>: [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>],</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">'B'</span>: [<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>]}</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(data)</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Novas linhas a serem adicionadas</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>novas_linhas <span class="op">=</span> pd.DataFrame({<span class="st">'A'</span>: [<span class="dv">10</span>, <span class="dv">11</span>], <span class="st">'B'</span>: [<span class="dv">20</span>, <span class="dv">21</span>]})</span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Concatenando os dois DataFrames</span></span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.concat([df, novas_linhas], ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="f6a2feb6" class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ordenando o DataFrame por uma coluna específica</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.sort_values(by<span class="op">=</span><span class="st">'A'</span>)</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="lidar-com-dados-na" class="level3" data-number="13.4.1">
<h3 data-number="13.4.1" class="anchored" data-anchor-id="lidar-com-dados-na"><span class="header-section-number">13.4.1</span> Lidar com dados NA</h3>
<div id="a965d611" class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>data2 <span class="op">=</span> {<span class="st">'A'</span>: [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>],</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>        <span class="st">'B'</span>: [np.nan, <span class="dv">6</span>, <span class="dv">7</span>, np.nan],</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">'C'</span>: [<span class="dv">10</span>, np.nan, np.nan, <span class="dv">13</span>]}</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>df_na <span class="op">=</span> pd.DataFrame(data2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cd784ab0" class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Encontrar valores NA (ausentes) em um DataFrame</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>df_na.isna()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="faae7f29" class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remover colunas com valores ausentes</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>df_na.dropna(axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>df_na</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="93584c39" class="cell" data-execution_count="58">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remover linhas com valores ausentes</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>df_na.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>df_na</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cfc1c9aa" class="cell" data-execution_count="59">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Preencher valores NA com um valor específico (por exemplo, zero)</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>df_na.fillna(<span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>df_na</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
</section>
<section id="temas-adicionais" class="level1" data-number="14">
<h1 data-number="14"><span class="header-section-number">14</span> Temas Adicionais</h1>
<section id="numpy---manipulating-arrays" class="level2" data-number="14.1">
<h2 data-number="14.1" class="anchored" data-anchor-id="numpy---manipulating-arrays"><span class="header-section-number">14.1</span> 1.5 Numpy - Manipulating Arrays</h2>
<p>Existem outras quatro operações relacionadas a manipular arrays como um todo: alterar a forma, adicionar/remover elementos, combinar, e dividir. Essa parte não é tão importante, e as funções são simples, vamos vê-las rapdiamente.</p>
<section id="alterar-a-forma" class="level3" data-number="14.1.1">
<h3 data-number="14.1.1" class="anchored" data-anchor-id="alterar-a-forma"><span class="header-section-number">14.1.1</span> Alterar a forma</h3>
<p>Veja as funções/métodos:</p>
<ul>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.resize.html"><code>.resize()</code></a> e <a href="https://numpy.org/doc/stable/reference/generated/numpy.reshape.html"><code>reshape()</code></a>: para alterar a forma de um array, passando a nova forma como uma tupla.</li>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.transpose.html"><code>transpose()</code></a>: transpor arrays.</li>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.flatten.html"><code>.flatten()</code></a> e <a href="https://numpy.org/doc/stable/reference/generated/numpy.ravel.html"><code>.ravel()</code></a>: achatar arrays.</li>
</ul>
</section>
<section id="adicionar-e-remover-elementos" class="level3" data-number="14.1.2">
<h3 data-number="14.1.2" class="anchored" data-anchor-id="adicionar-e-remover-elementos"><span class="header-section-number">14.1.2</span> Adicionar e remover elementos</h3>
<p>Veja os funções:</p>
<ul>
<li><code>append()</code>, <code>insert()</code>, e <code>delete()</code>.</li>
</ul>
</section>
<section id="combinar" class="level3" data-number="14.1.3">
<h3 data-number="14.1.3" class="anchored" data-anchor-id="combinar"><span class="header-section-number">14.1.3</span> Combinar</h3>
<p>Veja as funções:</p>
<ul>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.concatenate.html"><code>concatenate()</code></a>.</li>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.vstack.html"><code>vstack()</code></a>, e <a href="https://numpy.org/doc/stable/reference/generated/numpy.hstack.html"><code>hstack()</code></a>.</li>
</ul>
</section>
<section id="dividir" class="level3" data-number="14.1.4">
<h3 data-number="14.1.4" class="anchored" data-anchor-id="dividir"><span class="header-section-number">14.1.4</span> Dividir</h3>
<p>Veja as funções:</p>
<ul>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.hsplit.html"><code>.hsplit()</code></a> e <a href="https://numpy.org/doc/stable/reference/generated/numpy.vsplit.html"><code>.vsplit()</code></a>.</li>
</ul>
</section>
</section>
<section id="numpy---funções-universais" class="level2" data-number="14.2">
<h2 data-number="14.2" class="anchored" data-anchor-id="numpy---funções-universais"><span class="header-section-number">14.2</span> 1.6 Numpy - Funções Universais</h2>
<p>Existe um último tópico interessante, mas mais avançado. As funções do numpy são bem poderosas e flexíveis. É possível:</p>
<ul>
<li>Aplicá-las para cada dimensão separadamente – usando o argumento <code>axis=</code>.</li>
<li>Filtrar dimensões para não aplicar – usando o argumento <code>where=</code></li>
<li>Aplicar de modo a “acumular” ou “reduzir” o resultado – usando os métodos <code>.accumulate()</code> e <code>.reduce()</code>.</li>
</ul>
<p>Aprendam sobre esses tópicos em <a href="https://numpy.org/doc/stable/reference/ufuncs.html">Api Ref. ⭢ Universal functions</a>. Adicionalmente, Também vejam algumas táticas avançadas em <a href="https://numpy.org/doc/stable/reference/routines.functional.html">Api Ref. ⭢ Routines ⭢ Functional programming</a>.</p>
<p>Abaixo apresento alguns exemplos sem contexto nenhum.</p>
<div id="4d4a0791" class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>a1 <span class="op">=</span> np.array([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>np.add.accumulate(a1)</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>np.add.<span class="bu">reduce</span>(a1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="fdb254a6" class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>a2 <span class="op">=</span> np.array([[<span class="dv">1</span>,<span class="dv">2</span>], [<span class="dv">4</span>,<span class="dv">5</span>]])</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.add.accumulate(a2, axis <span class="op">=</span> <span class="dv">0</span>))</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.add.<span class="bu">reduce</span>(a2, axis <span class="op">=</span> <span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="5f7c65f6" class="cell" data-execution_count="62">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>where1 <span class="op">=</span> [<span class="va">True</span>, <span class="va">True</span>, <span class="va">False</span>]</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>where2 <span class="op">=</span> [[<span class="va">True</span>, <span class="va">False</span>, <span class="va">False</span>], [<span class="va">False</span>, <span class="va">True</span>, <span class="va">False</span>], [<span class="va">False</span>, <span class="va">False</span>, <span class="va">True</span>]]</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.add.<span class="bu">reduce</span>(a1, <span class="dv">0</span>, where <span class="op">=</span> where1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.add.<span class="bu">reduce</span>(a2, <span class="dv">0</span>, where <span class="op">=</span> where2), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="pandas---reshape" class="level2" data-number="14.3">
<h2 data-number="14.3" class="anchored" data-anchor-id="pandas---reshape"><span class="header-section-number">14.3</span> 2.5 Pandas - Reshape</h2>
<p>Primeiro, vamos baixar uns exemplos:</p>
<div id="09e11d06" class="cell" data-execution_count="63">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>tables_links <span class="op">=</span> {</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'df1'</span>: <span class="st">'https://raw.githubusercontent.com/tidyverse/tidyr/c6c126a61f67a10b5ab9ce6bb1d9dbbb7a380bbd/data-raw/table1.csv'</span>,</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'df2'</span>: <span class="st">'https://raw.githubusercontent.com/tidyverse/tidyr/c6c126a61f67a10b5ab9ce6bb1d9dbbb7a380bbd/data-raw/table2.csv'</span>,</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'df3'</span>: <span class="st">'https://raw.githubusercontent.com/tidyverse/tidyr/c6c126a61f67a10b5ab9ce6bb1d9dbbb7a380bbd/data-raw/table3.csv'</span>,</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'df4a'</span>: <span class="st">'https://raw.githubusercontent.com/tidyverse/tidyr/c6c126a61f67a10b5ab9ce6bb1d9dbbb7a380bbd/data-raw/table4a.csv'</span>,</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'df4b'</span>: <span class="st">'https://raw.githubusercontent.com/tidyverse/tidyr/c6c126a61f67a10b5ab9ce6bb1d9dbbb7a380bbd/data-raw/table4b.csv'</span>,</span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'df5'</span>: <span class="st">'https://raw.githubusercontent.com/tidyverse/tidyr/c6c126a61f67a10b5ab9ce6bb1d9dbbb7a380bbd/data-raw/table6.csv'</span></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> tables_links.keys():</span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">globals</span>()[i] <span class="op">=</span> pd.read_csv(tables_links[i])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="reordenar" class="level3" data-number="14.3.1">
<h3 data-number="14.3.1" class="anchored" data-anchor-id="reordenar"><span class="header-section-number">14.3.1</span> Reordenar</h3>
<p>Linhas:</p>
<div id="9d28b0db" class="cell" data-execution_count="64">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>df1.sort_values(by<span class="op">=</span><span class="st">'cases'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>E colunas</p>
<div id="93a4ef57" class="cell" data-execution_count="65">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>df1.reindex(columns<span class="op">=</span>[<span class="st">'year'</span>, <span class="st">'cases'</span>, <span class="st">'population'</span>, <span class="st">'country'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="renomear" class="level3" data-number="14.3.2">
<h3 data-number="14.3.2" class="anchored" data-anchor-id="renomear"><span class="header-section-number">14.3.2</span> Renomear</h3>
<p>Colunas:</p>
<div id="cad816e1" class="cell" data-execution_count="66">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>df1.rename(columns<span class="op">=</span>{<span class="st">'cases'</span>: <span class="st">'new_cases'</span>, <span class="st">'population'</span>: <span class="st">'new_population'</span>}, inplace<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Linhas:</p>
<div id="9a40ff72" class="cell" data-execution_count="67">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>df1.rename({<span class="dv">0</span>: <span class="st">'Row1'</span>, <span class="dv">1</span>: <span class="st">'Row2'</span>, <span class="dv">2</span>: <span class="st">'Row3'</span>, <span class="dv">3</span>: <span class="st">'Row4'</span>, <span class="dv">4</span>: <span class="st">'Row5'</span>, <span class="dv">5</span>: <span class="st">'Row6'</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="remodelar" class="level3" data-number="14.3.3">
<h3 data-number="14.3.3" class="anchored" data-anchor-id="remodelar"><span class="header-section-number">14.3.3</span> Remodelar</h3>
<p>Wide to long (melt):</p>
<div id="0fd10c99" class="cell" data-execution_count="68">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df4a)</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>pd.melt(df4a, id_vars <span class="op">=</span> [<span class="st">"country"</span>], var_name <span class="op">=</span> <span class="st">"year"</span>, value_name <span class="op">=</span> <span class="st">"cases"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Long to wide (pivot)</p>
<div id="8467e8c5" class="cell" data-execution_count="69">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df2)</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>pd.pivot(df2, index <span class="op">=</span> [<span class="st">"country"</span>, <span class="st">"year"</span>], columns <span class="op">=</span> <span class="st">"type"</span>, values <span class="op">=</span> <span class="st">"count"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="separar-e-unir-colunas" class="level3" data-number="14.3.4">
<h3 data-number="14.3.4" class="anchored" data-anchor-id="separar-e-unir-colunas"><span class="header-section-number">14.3.4</span> Separar e unir colunas</h3>
<p>Separar:</p>
<div id="a1f76e70" class="cell" data-execution_count="70">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df3, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>df3[[<span class="st">"cases"</span>, <span class="st">"population"</span>]] <span class="op">=</span> df3[<span class="st">"rate"</span>].<span class="bu">str</span>.split(<span class="st">"/"</span>, expand <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>df3 <span class="op">=</span> df3.drop(<span class="st">"rate"</span>, axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Unir:</p>
<div id="5d8eb5b3" class="cell" data-execution_count="71">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df5, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>df5[<span class="st">"year"</span>] <span class="op">=</span> df5[<span class="st">"century"</span>] <span class="op">+</span> df5[<span class="st">"year"</span>]</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>df5 <span class="op">=</span> df5.drop(<span class="st">"century"</span>, axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="pandas---combinar" class="level2" data-number="14.4">
<h2 data-number="14.4" class="anchored" data-anchor-id="pandas---combinar"><span class="header-section-number">14.4</span> 2.6 Pandas - Combinar</h2>
<section id="concatenar" class="level3" data-number="14.4.1">
<h3 data-number="14.4.1" class="anchored" data-anchor-id="concatenar"><span class="header-section-number">14.4.1</span> Concatenar</h3>
<p>Veja a função: - <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.concat.html?highlight=concat#pandas.concat"><code>.concat()</code></a></p>
</section>
<section id="merge" class="level3" data-number="14.4.2">
<h3 data-number="14.4.2" class="anchored" data-anchor-id="merge"><span class="header-section-number">14.4.2</span> Merge</h3>
<p>Veja as funções abaixo para <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/merging.html">unir dataframes</a> de maneiras diferentes:</p>
<p><strong>Standard Joins:</strong></p>
<ul>
<li><a href=""><code>.merge()</code></a></li>
</ul>
<p><strong>Filtering Joints:</strong></p>
<ul>
<li><a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.isin.html?highlight=isin#pandas.DataFrame.isin"><code>.isin()</code></a></li>
</ul>
<!-- mais coisa -->
</section>
</section>
</section>
<section id="introdução-2" class="level1" data-number="15">
<h1 data-number="15"><span class="header-section-number">15</span> 1. Introdução</h1>
<p>Esta aula marca uma divisão no curso de trainee. Até agora, vocês estavam aprendendo várias ferramentas úteis, mas sem um objetivo específico além de simplesmente aprender a programar em Python. Nesta aula, vamos apresentar o objetivo, vocês irão aprender a realizar “projetos de Ciência de Dados”.</p>
<p>A aula está organizada como segue:</p>
<ul>
<li>1 Introdução.
<ul>
<li>1.1 Recapitulando: vamos recapitular as ferramentas aprendidas até aqui, e trazer atenção para os conceitos/modos de pensar mais gerais, que motivaram essas ferramentas.</li>
<li>1.2 Projetos de ciência de dados: iremos apresentar o que é Ciência de Dados, e quais são as etapas de um projeto comum: data wrangle, exploração, e comunicação.</li>
</ul></li>
<li>2 Data Wrangle.
<ul>
<li>2.1 Tidy: a primeira etapa de um projeto é “arrumar” os dados, e existe uma noção bem clara do que é <em>tidy data</em>. Vamos mostrar como as ferramentas do pandas podem ser utilizadas nessa etapa.</li>
<li>2.2 Transformação: após arrumar os dados, pode-mos transformá-los para habilitar as etapas da visualização e modelagem. Também iremos relacionar com as ferramentas do pandas.</li>
</ul></li>
<li>3 Visualização: outra parte do ciclo é a visualização, tanto via <em>summary statistics</em> (3.1), quanto via gráficos (3.2). Vamos apresentar a biblioteca matplotlib e como utilizá-la nesse contexto.</li>
</ul>
<section id="recapitulando" class="level2" data-number="15.1">
<h2 data-number="15.1" class="anchored" data-anchor-id="recapitulando"><span class="header-section-number">15.1</span> 1.1 Recapitulando</h2>
<p>Nas três primeiras aulas do curso, vocês aprenderam diversas ferramentas. Veja o diagrama abaixo, e atente por:</p>
<ul>
<li>Relembrar as ferramentas em si.
<ul>
<li>Tenha certeza que você de fato sabe todos esses temas.</li>
</ul></li>
<li>Agora com essa visão de cima, veja os conceitos mais gerais de ciência da computação associados às ferramentas.
<ul>
<li>O foco do curso não foi explicar essas generalizações, mas elas são muito úteis, tanto para entender melhor como o python funciona, quanto para facilitar aprender outras linguagens no futuro.</li>
</ul></li>
<li>Veja como as ferramentas condicionam novas maneiras de pensar em dados/problemas.
<ul>
<li>Na última aula, vocês aprenderam o conceito de vetores homogêneos, e o novo modo de pensar da vetorização. Mais especificamente, também aprenderam a maneira de pensar em “bases de dados”</li>
</ul></li>
</ul>
<p>Na aula de hoje, vocês vão aprender dois novos contextos: (i) um tipo específico de organização de bases de dados, os <em>dados tidy</em>, e (ii) a maneira de usar dados tidy para resolver problemas, com a Ciência de Dados, e as etapas de seus projetos.</p>
<p>Adicionalmente, vão ver novas ferramentas: para a parte de arrumação de dados, vocês já a conhecem, é o pandas, mas para a visualização, vão aprender a biblioteca gráfica matplotlib.</p>
<p><img src="https://i.imgur.com/aaeCsMB.png" width="800"></p>
</section>
<section id="projetos-de-ciência-de-dados" class="level2" data-number="15.2">
<h2 data-number="15.2" class="anchored" data-anchor-id="projetos-de-ciência-de-dados"><span class="header-section-number">15.2</span> 1.2 Projetos de Ciência de Dados</h2>
<section id="a-ciência-de-dados" class="level3" data-number="15.2.1">
<h3 data-number="15.2.1" class="anchored" data-anchor-id="a-ciência-de-dados"><span class="header-section-number">15.2.1</span> A Ciência de Dados</h3>
<p>A Ciência de Dados é um campo gigante, que nasceu via uma demanda de expandir a estatística para vias de “learn from data”, “more emphasis on data preparation and presentation rather than statistical modeling”, e “emphasis on prediction rather than inference”. Atualmente, o termo não é super bem definido, e o campo tem muita intersecção com outras disciplinas.</p>
<p>De acordo com a Wikipedia:</p>
<blockquote class="blockquote">
<p>Data science is an interdisciplinary academic field that uses statistics, scientific computing, scientific methods, processes, algorithms and systems to extract or extrapolate knowledge and insights from data.</p>
</blockquote>
<p>Fontes: <a href="https://www.tandfonline.com/doi/full/10.1080/10618600.2017.1384734">“50 Years of Data Science” (2017)</a> e <a href="https://en.wikipedia.org/wiki/Data_science">Wikipedia</a>.</p>
</section>
<section id="as-etapas-de-um-projeto" class="level3" data-number="15.2.2">
<h3 data-number="15.2.2" class="anchored" data-anchor-id="as-etapas-de-um-projeto"><span class="header-section-number">15.2.2</span> As etapas de um projeto</h3>
<p>Mais interessante que ficar tentando definir a disciplina, vamos entendê-la na prática. Como a aula é minha, e eu faço o que eu quiser, vou utilizar a explicação do livro <a href="https://r4ds.had.co.nz/index.html">“R for Data Science”</a>.</p>
<p>Um projeto comum, no geral, se parece como abaixo. Veja uma breve explicação de cada tópico.</p>
<p><img src="https://d33wubrfki0l68.cloudfront.net/571b056757d68e6df81a3e3853f54d3c76ad6efc/32d37/diagrams/data-science.png" height="200"></p>
<section id="importing" class="level4" data-number="15.2.2.1">
<h4 data-number="15.2.2.1" class="anchored" data-anchor-id="importing"><span class="header-section-number">15.2.2.1</span> Importing</h4>
<p>A primeira etapa é a importação. Alguns comentários:</p>
<ul>
<li>Os dados podem vir de várias fontes, como arquivos locais, bancos de dados, APIs (application programming interface), ou de sites (via web scrapping).</li>
<li>Os dados podem estar em vários formatos como CSV, Excel, JSON, entre outros. É interessante ter um conhecimento básico de como cada um funciona.</li>
<li>Cada tipo de fonte tem uma maneira diferente de se interagir, e cada formato exige sua própria função. Para os casos mais simples, o pandas (e qualquer outra biblioteca de dataframes), tem funções para I/O.</li>
</ul>
<p>Não vamos entrar em detalhes nesse tema. Não é algo super extenso nem complexo, e existem muitas referências online. Uma das mais completas que achei foi <a href="https://realpython.com/pandas-read-write-files/">esse tutorial da RealPython</a>.</p>
</section>
<section id="tidy" class="level4" data-number="15.2.2.2">
<h4 data-number="15.2.2.2" class="anchored" data-anchor-id="tidy"><span class="header-section-number">15.2.2.2</span> Tidy</h4>
<p>A próxima etapa é arrumar, <em>tidy</em>, os dados. Vamos falar sobre isso com mais detalhe, mas existe uma noção bem específica do que são dados arrumados, <em>tidy data</em>.</p>
<p>As três próximas etapas existem dentro de um ciclo.</p>
</section>
<section id="transform" class="level4" data-number="15.2.2.3">
<h4 data-number="15.2.2.3" class="anchored" data-anchor-id="transform"><span class="header-section-number">15.2.2.3</span> Transform</h4>
<p>Mesmo com dados já arrumados, ainda temos o interesse de transformá-los, para conseguir obter insights novos da mesma base de dados. Na aula de hoje, vamos dar alguns exemplos de interesses, e este tema ficará mais claro.</p>
<p>Visualizar e modelar os dados trará novos insights e novas demandas, de modo que estamos constantemente transformando os dados para criar novas visualizações e modelagens.</p>
<p><em>Tidy</em> e <em>transform</em> juntos são chamados de <em>data wrangling</em>.</p>
</section>
<section id="visualize" class="level4" data-number="15.2.2.4">
<h4 data-number="15.2.2.4" class="anchored" data-anchor-id="visualize"><span class="header-section-number">15.2.2.4</span> Visualize</h4>
<p>Aqui, serei preguiçoso, o texto do Hadley Wickham é muito bom:</p>
<blockquote class="blockquote">
<p>Visualisation is a fundamentally human activity. A good visualisation will show you things that you did not expect, or raise new questions about the data. A good visualisation might also hint that you’re asking the wrong question, or you need to collect different data. Visualisations can surprise you, but don’t scale particularly well because they require a human to interpret them.</p>
</blockquote>
</section>
<section id="model" class="level4" data-number="15.2.2.5">
<h4 data-number="15.2.2.5" class="anchored" data-anchor-id="model"><span class="header-section-number">15.2.2.5</span> Model</h4>
<p>Um modelo é, em termos simplificados e a depender do contexto, um conjunto de hipóteses sobre o mundo – sobre o processo gerador dos dados –, acrescido com um método matemático e computacional de estimar esse processo.</p>
<blockquote class="blockquote">
<p>Models are a fundamentally mathematical or computational tool, so they generally scale well. (…) But every model makes assumptions, and by its very nature a model cannot question its own assumptions. That means a model cannot fundamentally surprise you.</p>
</blockquote>
</section>
<section id="comunication" class="level4" data-number="15.2.2.6">
<h4 data-number="15.2.2.6" class="anchored" data-anchor-id="comunication"><span class="header-section-number">15.2.2.6</span> Comunication</h4>
<p>O último passo é comunicação. As linguagens de programação provém ferramentas para expor seus resultados. O próprio Jupyter Notebook onde esta aula foi escrita é um exemplo disso. Mas existem muitas outras ferramentas mais avançadas para criar reports, livros, páginas na web, aplicativos, etc. No curso de trainee, não iremos cobrir essa etapa com detalhe.</p>
<p>Por fim, dos últimos comentários. Primeiro, e a programação?</p>
<blockquote class="blockquote">
<p>Surrounding all these tools is programming. Programming is a cross-cutting tool that you use in every part of the project. You don’t need to be an expert programmer to be a data scientist, but learning more about programming pays off because becoming a better programmer allows you to automate common tasks, and solve new problems with greater ease.</p>
</blockquote>
<p>E o que falta?</p>
<p>No curso do trainee iremos explicar todas as etapas (fora comunicação), mas é só isso que você precisará? Não, cada projeto exige seu conhecimento específico, em cada tema, cada disciplina, existem conceitos próprios que entrarão em alguma das etapas aqui descritas. Mas tudo bem, o importante é vocês saberem a base, e conseguirão ir atrás do adicional por conta própria.</p>
</section>
</section>
<section id="a-organização-de-um-script" class="level3" data-number="15.2.3">
<h3 data-number="15.2.3" class="anchored" data-anchor-id="a-organização-de-um-script"><span class="header-section-number">15.2.3</span> A Organização de um script</h3>
<p>Acima temos as etapas “teóricas” de um projeto, mas como um script é organizado na prática? Normalmente nas seguintes seções:</p>
<ul>
<li>Introdução:
<ul>
<li>Descrição do problema.</li>
<li>Descrição dos dados (fontes, questões técnicas, etc.).</li>
<li>Setup do código (importar módulos, definir funções, etc.).</li>
</ul></li>
<li>Importar e arrumar:
<ul>
<li>Importar os dados <strong>[importar]</strong>.</li>
<li>Transformá-los em um dataframe tidy <strong>[arrumar]</strong>.</li>
<li>Lidar com NAs <strong>[arrumar]</strong>.</li>
</ul></li>
<li>Pré-processamento dos daods:
<ul>
<li>Analisar cada variável, seu tipo, valores NA/NaN, e mais:
<ul>
<li>Variáveis categóricas – categorias, distribuição <strong>[visualizar]</strong>..</li>
<li>Variáveis numéricas – range, distribuição <strong>[vis.]</strong>.</li>
</ul></li>
<li>Corrigir problemas observados <strong>[transformar]</strong>.</li>
</ul></li>
<li>Análise exploratória:
<ul>
<li>Explorar a relação entre as variáveis, especialmente entre os x’s e os y’s.</li>
<li>Y binário: distribuição condicional em cada x <strong>[vis.]</strong>.</li>
<li>Y contínuo: distribuição conjunta em cada x <strong>[vis.]</strong>.</li>
<li>Conseguir insights sobre o problema e transformar/criar variáveis para a modelagem <strong>[trans.]</strong>.</li>
</ul></li>
<li>Modelagem:
<ul>
<li>Dividir base em treino e teste, balancear os dados <strong>[trans.]</strong>.</li>
<li>Definir os modelos e aplicá-los. Variar os hiperparâmetros <strong>[modelar]</strong>.</li>
<li>Visualizar os resultados [<strong>vis.</strong>].</li>
<li>Adquirir insights, transformar os dados de acordo, e remodelar <strong>[trans.]</strong> <strong>[modelar]</strong>.</li>
</ul></li>
<li>Comunicar:
<ul>
<li>Gerar uma visualização final com os pontos principais do processo e principais resultados <strong>[vis.]</strong>.</li>
<li>Comunicar os resultados <strong>[comunicar]</strong>.</li>
</ul></li>
</ul>
<p>Todas essas etapas serão explicadas na prática na aula 6, então não se preocupem tanto por enquanto.</p>
</section>
</section>
</section>
<section id="data-wrangle" class="level1" data-number="16">
<h1 data-number="16"><span class="header-section-number">16</span> 2. Data Wrangle</h1>
<section id="tidy-1" class="level3" data-number="16.0.1">
<h3 data-number="16.0.1" class="anchored" data-anchor-id="tidy-1"><span class="header-section-number">16.0.1</span> Tidy</h3>
<section id="tidy-data" class="level4" data-number="16.0.1.1">
<h4 data-number="16.0.1.1" class="anchored" data-anchor-id="tidy-data"><span class="header-section-number">16.0.1.1</span> Tidy data</h4>
<p>[You can represent the same underlying data in multiple ways. The example below shows the same data organised in four different ways. Each dataset shows the same values of four variables country, year, population, and cases, but each dataset organises the values in a different way.]</p>
<p><img src="https://imgur.com/XA7JWwS.png" height="400"></p>
<p><img src="https://imgur.com/nN0ouP9.png" height="400"></p>
<p>[These are all representations of the same underlying data, but they are not equally easy to use. One dataset, the tidy dataset, will be much easier to work with inside the tidyverse.</p>
<p>There are three interrelated rules which make a dataset tidy:</p>
<ul>
<li>Each variable must have its own column.</li>
<li>Each observation must have its own row.</li>
<li>Each value must have its own cell.</li>
</ul>
<p>Figure 12.1 shows the rules visually. ]</p>
<p><img src="https://d33wubrfki0l68.cloudfront.net/6f1ddb544fc5c69a2478e444ab8112fb0eea23f8/91adc/images/tidy-1.png" height="200"></p>
<p>[ Why ensure that your data is tidy? There are two main advantages:</p>
<ul>
<li><p>There’s a general advantage to picking one consistent way of storing data. If you have a consistent data structure, it’s easier to learn the tools that work with it because they have an underlying uniformity.</p></li>
<li><p>There’s a specific advantage to placing variables in columns because it allows R’s vectorised nature to shine. As you learned in mutate and summary functions, most built-in R functions work with vectors of values. That makes transforming tidy data feel particularly natural. ]</p></li>
</ul>
</section>
<section id="arrumando-datasets" class="level4" data-number="16.0.1.2">
<h4 data-number="16.0.1.2" class="anchored" data-anchor-id="arrumando-datasets"><span class="header-section-number">16.0.1.2</span> Arrumando datasets</h4>
<p>Agora que já entendemos o que é tidy data, podemos adquirir a habilidade de olhar para um dataset e, sabendo onde queremos chegar, elencar quais são as alterações a serem feitas – “remover esta linha”, “dividir essa coluna no meio”.</p>
<p>Após elencar quais alterações devem ser feitas, é simples fazer a ponte de quais <em>manipulações de dados você quer fazer</em> – “subset linhas” e “separar colunas”.</p>
<p>Por fim, só falta relembrar como é o código que aplica essa manipulação. Essa é a parte mais simples! É só voltar na aula passada, pesquisar na internet, <em>ver no chat</em>, ou perguntar para o seu amigo preferido!</p>
<p>Tendo as duas primeiras habilidades, você tem tudo o que precisa para pesquisar, e não há problema nenhum em ter que pesquisar, o problema é ter que pesquisar , e não saber como!. Agora, se você só sabe a terceira, você não precisa pesquisar, mas <em>não sabe o que você não precisa pesquisar</em>, o que não é especialmente útil.</p>
<p>Se você quiser ficar insano no pandas, rever a aula passada três vezes por dia, deitado numa banheira congelada, será ótimo, você ficará eficiênte muito rápidamente. Mas não precisa, essa eficiência vem com o tempo, e o mais importante é saber a lógica de “o que precisa alterar” e “quais são as manipulações que existem”.</p>
<p>Ok, sem mais delongas, vamos aprender a elencar alterações, vamos ver uns exemplos <a href="https://docs.google.com/presentation/d/1VZQdPhCVgatuJxwFHgmUVGAN6TcJwyOw/edit?usp=sharing&amp;ouid=116517596014032888777&amp;rtpof=true&amp;sd=true">vide o PPT</a>.</p>
<p>Qual foi a receitinha de bolo que aprendemos? (hmm bolo 😋). Recebemos um dataset, e:</p>
<ul>
<li>Arrumar os dados para o formato data frame.
<ul>
<li>Todas as colunas são homogêneas?
<ul>
<li>Remover linhas “ruins”, converter valores.</li>
</ul></li>
<li>Todas as colunas são do mesmo tamanho?
<ul>
<li>Remover linhas “ruins”.</li>
</ul></li>
</ul></li>
<li>Arrumar os dados para o formato tidy.
<ul>
<li>Toda coluna é uma variável?
<ul>
<li>Remover colunas “ruins”.</li>
<li>Separar/unir colunas colunas.</li>
</ul></li>
<li>Toda linha é uma observação?
<ul>
<li>Quais são as variáveis que definem uma observação?</li>
<li>Pivot e melt.</li>
</ul></li>
<li>Toda célula é um valor?
<ul>
<li>Transformar dados “ruins” em NA.</li>
<li>Lidar com dados NA.</li>
</ul></li>
</ul></li>
<li>Tenho mais de um dataset? Deixá-los tidy e então realizaram algum merge.</li>
</ul>
</section>
</section>
<section id="transform-1" class="level3" data-number="16.0.2">
<h3 data-number="16.0.2" class="anchored" data-anchor-id="transform-1"><span class="header-section-number">16.0.2</span> Transform</h3>
<p>Após arrumarmos um dataset, ainda aplicaremos transformações com base nas demandas da fase de visualização e modelagem.</p>
<ul>
<li>Manipular linhas.
<ul>
<li>Sorting.</li>
<li>Sampling.</li>
<li>Filtrar observações.</li>
</ul></li>
<li>Transformar/criar colunas:
<ul>
<li>Alterar a unidade de uma variável.</li>
<li>Normalizar variáveis.</li>
<li>Agrupar as categorias de uma variável categórica.</li>
<li>Corrigir/formatar texto de variáveis string.</li>
<li>Manipular datas.</li>
<li>Criar novas colunas a partir de operações com múltiplas outras Exemplos: salário semanal * semanas trabalhadas; idade ao quadrado.</li>
<li>Criar uma coluna para ajudar em um plot.</li>
</ul></li>
</ul>
<p>Todas essas operações são factíveis de serem feitas com base na aula passada de pandas. Vocês verão muitos exemplos dessa etapa na aula 6.</p>
</section>
</section>
<section id="visualização" class="level1" data-number="17">
<h1 data-number="17"><span class="header-section-number">17</span> 3. Visualização</h1>
<section id="sumarisação-dos-dados" class="level2" data-number="17.1">
<h2 data-number="17.1" class="anchored" data-anchor-id="sumarisação-dos-dados"><span class="header-section-number">17.1</span> 3.1 Sumarisação dos Dados</h2>
<p>[Maneiras de conseguir “resumir” dados, criar estatísticas descritivas em cima de uma base de dado]</p>
<p>[Alguns links:</p>
<p>https://pandas.pydata.org/docs/getting_started/intro_tutorials/06_calculate_statistics.html https://www.geeksforgeeks.org/pandas-groupby-summarising-aggregating-and-grouping-data-in-python/ https://www.geeksforgeeks.org/pandas-groupby-summarising-aggregating-and-grouping-data-in-python/]</p>
<p>Vamos começar carregando dados:</p>
<div id="5efb2cc1" class="cell" data-execution_count="72">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="777b1ffe" class="cell" data-execution_count="73">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">"https://drive.google.com/uc?id=1u2MEH_DTBMyG3clVKA4Q5FEpntLZNKeE"</span>)</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="sumarisando-o-dataframe-como-um-todo" class="level3" data-number="17.1.1">
<h3 data-number="17.1.1" class="anchored" data-anchor-id="sumarisando-o-dataframe-como-um-todo"><span class="header-section-number">17.1.1</span> Sumarisando o dataframe como um todo</h3>
<p>[funções .info() e .describe(). tem mais alguma função tipo essas?]</p>
</section>
<section id="sumarisando-variáveis-categóricas" class="level3" data-number="17.1.2">
<h3 data-number="17.1.2" class="anchored" data-anchor-id="sumarisando-variáveis-categóricas"><span class="header-section-number">17.1.2</span> Sumarisando variáveis categóricas</h3>
<p>[explicar o .value_counts. mais algum método legal?]</p>
<div id="826ff9c5" class="cell" data-execution_count="74">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> df[<span class="st">'Fuel_Type'</span>].value_counts(normalize <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(counts)</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>counts.plot(kind <span class="op">=</span> <span class="st">"bar"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="sumarisando-variáveis-contínuas" class="level3" data-number="17.1.3">
<h3 data-number="17.1.3" class="anchored" data-anchor-id="sumarisando-variáveis-contínuas"><span class="header-section-number">17.1.3</span> Sumarisando variáveis contínuas</h3>
<p>[explicar as estatísticas de .describe, density, e boxplot. mais algum método legal?]</p>
<p>As estatísticas descritivas principais estão na tabela “describe”, mas também podem ser obtidas individualmente.</p>
<div id="740b3fb4" class="cell" data-execution_count="75">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df[<span class="st">'Price'</span>].mean()) <span class="co"># Também existe .sum(), .min(), etc.</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Price'</span>].describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>De modo mais geral, mas menos mensurável, podemos olhar para a distribuição da variável como um todo, e uma visualização simplificada com boxplots.</p>
<div id="bbbe021a" class="cell" data-execution_count="76">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Price'</span>].plot.density()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="ab49c799" class="cell" data-execution_count="77">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Price'</span>].plot.box()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="analisando-grupos-nos-dados" class="level3" data-number="17.1.4">
<h3 data-number="17.1.4" class="anchored" data-anchor-id="analisando-grupos-nos-dados"><span class="header-section-number">17.1.4</span> Analisando grupos nos dados</h3>
<p>[explicar fazer esses summaries com groupby, e usando o argumento by=… nas funções de plotting. ver https://www.shanelynn.ie/summarising-aggregation-and-grouping-data-in-python-pandas/ por exemplo]</p>
<!-- mais coisa -->
<p>[Parte do material abaixo ainda é composto de referências, e não é 100% autoral, mas tudo teve pelo menos contribuições pessoais.]</p>
</section>
</section>
<section id="ggplot" class="level2" data-number="17.2">
<h2 data-number="17.2" class="anchored" data-anchor-id="ggplot"><span class="header-section-number">17.2</span> GGPlot</h2>
<p>[a fazer]</p>
</section>
<section id="matplotlib" class="level2" data-number="17.3">
<h2 data-number="17.3" class="anchored" data-anchor-id="matplotlib"><span class="header-section-number">17.3</span> Matplotlib</h2>
<p>[a fazer]</p>
<p>[alguns links: https://matplotlib.org/stable/users/explain/quick_start.html; https://matplotlib.org/3.8.3/users/index.html; https://matplotlib.org/cheatsheets/_images/cheatsheets-1.png; https://matplotlib.org/3.8.3/index.html, https://matplotlib.org/3.8.3/api/index.html] ### Anatomia de uma figura</p>
<p><img src="https://matplotlib.org/stable/_images/anatomy.png" width="300"></p>
<ul>
<li>Figure</li>
<li>Axis</li>
<li>Artist</li>
</ul>
<p>[explicar isso dai] ### O estilo da programação</p>
<p>[explicar https://matplotlib.org/stable/users/explain/quick_start.html#coding-styles por cima e apresentar um exemplo) ### Plots</p>
<p>[explicar os plots possíveis] ### Estética</p>
<p>[alterando a estética dos dados, isto é, cores, markers, etc.] ### Tema</p>
<p>[alterando a estética da figura (não dos dados), isto é, eixos, título, etc.] ### Plots combinados</p>
<p>[subplots e tals]</p>


</section>
</section>
</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/ricardo-semiao\.github\.io\/course-paaml\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./2-intro_ml.html" class="pagination-link" aria-label="Machine Learning Teórica">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Machine Learning Teórica</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./2-shallow.html" class="pagination-link" aria-label="Shallow Learning">
        <span class="nav-page-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Shallow Learning</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->

    </div>

    <footer id="site-footer">
        <div>
            <p>Livro foi feito via <a href="https://quarto.org/docs/books/">Quarto</a>, com o template <a href="https://github.com/ricardo-semiao/ricardo-semiao/tree/main/themes/rsquartobook">rsquartobook</a>.</p>
        </div>
    </footer>
    <script src="/site_assets/site_structure.js"></script>







</body></html>